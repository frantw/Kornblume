import{o as le}from"./index-QXNeyax_.js";import{i as ce,o as w,c as C,a as t,n as te,e as S,j as D,w as ne,v as me,F as T,r as se,f as j,t as V,u as E,k as B,l as Ce,b as H,g as X,m as Se,_ as ue,p as P,q as Ge,s as Te,x as ge,y as ye,z as Me,A as ve,d as ze}from"./index-1gRkNznC.js";const He=ce("planner",{state:()=>({selectedArcanists:[]}),persist:!0}),Ke=ce("wilderness",{state:()=>({settings:{dust1:6,dust2:6,dust3:6,gold1:6,gold2:6,gold3:6,vigor:0,lazyModo:!1,wildernessOutput:{dust:19440,gold:8640}}}),persist:!0}),_e=ce("plannerSettings",{state:()=>({settings:{showUnreleased:!1,unreleasedDrops:!1}}),persist:!0}),Ye=["data-tip"],Ze={class:"rounded-md overflow-hidden"},Je={class:"avatar"},Xe=["src","alt"],Ne={__name:"ArcanistIcon",props:{arcanist:{type:Object,required:!0}},setup(e){const a=n=>`images/arcanists/icon/${n}.png`;return(n,l)=>(w(),C("div",{class:"tooltip","data-tip":e.arcanist.Name},[t("div",Ze,[t("div",Je,[t("div",{class:te(["w-10 rounded",{"bg-orange-300":e.arcanist.Rarity===6,"bg-yellow-100":e.arcanist.Rarity===5,"bg-purple-400":e.arcanist.Rarity===4,"bg-sky-200":e.arcanist.Rarity===3,"bg-green-200":e.arcanist.Rarity===2}])},[t("img",{src:a(e.arcanist.Id),alt:e.arcanist.Name},null,8,Xe)],2)])])],8,Ye))}},et={class:"list-overlay"},tt={class:"custom-modal-small h-2/3"},st={class:"relative mb-4"},nt=t("i",{class:"fas fa-times"},null,-1),at=[nt],lt={class:"p-2 overflow-y-auto h-5/6"},ot=["onClick"],it={class:"text-white ml-8"},rt={__name:"ArcanistList",props:{arcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},selectArcanist:{type:Function,required:!0}},setup(e,{emit:a}){const n=e,l=a,c=d=>{l("selectArcanist",d),r()},r=()=>{l("closeOverlay")},h=S(""),u=D(()=>n.arcanists.filter(d=>d.Name.toLowerCase().includes(h.value.toLowerCase())));return(d,m)=>(w(),C("div",et,[t("div",tt,[t("div",st,[ne(t("input",{"onUpdate:modelValue":m[0]||(m[0]=_=>h.value=_),type:"text",placeholder:"Search Arcanists",class:"bg-gray-800 text-white p-2 rounded-md w-11/12 focus:outline-none"},null,512),[[me,h.value]]),t("button",{onClick:r,class:"absolute top-2 right-0 text-white"},at)]),t("div",lt,[(w(!0),C(T,null,se(u.value,_=>(w(),C("div",{key:_.Id,onClick:s=>c(_),class:"p-4 flex items-center cursor-pointer hover:bg-gray-700 transition-colors"},[j(Ne,{arcanist:_},null,8,["arcanist"]),t("span",it,V(_.Name),1)],8,ot))),128))])])]))}},be=E().items.data;function pe(e){return e>1e6?`${(e/1e6).toFixed(1)}m`:e>1e4?`${(e/1e3).toFixed(0)}k`:e.toString()}function Oe(e){const a=h=>{const u=be.find(d=>d.Name==h);return u?u.Id:null},n=h=>{const u=be.find(d=>d.Name==h);return u?u.Rarity:null},l=h=>{const u=a(h);return u?`images/items/icon/${u}.png`:null},c=h=>{const u=n(h);return u?`images/items/border/${u}.png`:null};return{material:e.Material,quantity:pe(e.Quantity),itemImagePath:l(e.Material),borderImagePath:c(e.Material)}}const ct=["data-tip"],ut={class:"relative inline-block"},dt=["src"],ht=["src"],ft={class:"absolute text-white bottom-4 right-3 bg-gray-700 rounded-tl px-1 py-px text-xs"},Re={__name:"ItemIcon",props:{material:{type:Object,required:!0}},setup(e){const a=e,n=D(()=>Oe(a.material));return(l,c)=>(w(),C("div",{class:"tooltip","data-tip":n.value.material},[t("div",ut,[t("img",{src:n.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,dt),t("img",{src:n.value.itemImagePath,alt:"Material Image",class:"w-20 h-20"},null,8,ht),t("div",ft,V(n.value.quantity),1)])],8,ct))}},vt={class:"custom-scrollbar pt-10 flex flex-wrap justify-center overflow-y-scroll overflow-x-hidden"},pt={__name:"ItemList",props:{materialList:{type:Array,required:!0}},setup(e){const a=e;return(n,l)=>(w(),C("div",vt,[(w(!0),C(T,null,se(a.materialList,c=>(w(),B(Re,{key:c,material:c},null,8,["material"]))),128))]))}},mt=E().calculations.data,xe=E().items.data,gt=E().arcanists.data;function De(e){e.sort((a,n)=>{const l=xe.find(d=>d.Name===a.Material),c=xe.find(d=>d.Name===n.Material),r=["Base Item","Resonate Material","Insight Material","Build Material"],h=r.indexOf(l.Category),u=r.indexOf(c.Category);return h!==u?h-u:c.Rarity!==l.Rarity?c.Rarity-l.Rarity:l.Name.localeCompare(c.Name)})}function Ve(e){const a={};return e.forEach(l=>{l&&(Array.isArray(l)?l.flat().forEach(({Material:r,Quantity:h})=>{a[r]?a[r]+=h:a[r]=h}):typeof l=="object"&&Object.entries(l).forEach(([c,r])=>{a[c]?a[c]+=r:a[c]=r}))}),Object.keys(a).map(l=>({Material:l,Quantity:a[l]}))}function yt(e){var l,c;De(e);const a=((l=e.find(r=>r.Material==="Dust"))==null?void 0:l.Quantity)||0,n=((c=e.find(r=>r.Material==="Sharpodonty"))==null?void 0:c.Quantity)||0;return a===0&&n===0?e.filter(h=>h.Material!=="Dust"&&h.Material!=="Sharpodonty"):e}function Le(e){const a=gt.find(s=>s.Id===e.Id),n=s=>{let f={Dust:0,Sharpodonty:0};if(s.currentInsight==s.goalInsight){const{Dust:y,Sharpodonty:$}=r(s.currentLevel,s.goalLevel,s,s.currentInsight);return f.Dust+=y,f.Sharpodonty+=$,f}for(let y=s.currentInsight;y<=s.goalInsight;y++)if(y<s.goalInsight){const $=c(s,y);if(f.Dust+=$.Total.Dust,f.Sharpodonty+=$.Total.Sharpodonty,y==s.currentInsight){const{Dust:x,Sharpodonty:o}=r(1,s.currentLevel,s,y);f.Dust-=x,f.Sharpodonty-=o}}else{const{Dust:$,Sharpodonty:x}=r(1,s.goalLevel,s,y);f.Dust+=$,f.Sharpodonty+=x}return[{Material:"Dust",Quantity:f.Dust},{Material:"Sharpodonty",Quantity:f.Sharpodonty}]},l=(s,f,g)=>{const y={};if(s===f)return null;for(let x=Number(s+1);x<=f;x++){const o=g.find(v=>v.Id===x);o&&o.Material.forEach((v,p)=>{const i=o.Quantity[p];y[v]?y[v]+=i:y[v]=i})}return Object.keys(y).map(x=>({Material:x,Quantity:y[x]}))},c=(s,f)=>mt.find(y=>y.Rarity.includes(a.Rarity)&&y.Insight==f),r=(s,f,g,y)=>{let $={Dust:0,Sharpodonty:0};for(let x=Number(++s);x<=Number(f);x++){const o=c(g,y),v=x.toString(),p=o.Levels[v];p&&($.Dust+=p.Dust,$.Sharpodonty+=p.Sharpodonty)}return $},h=l(e.currentInsight,e.goalInsight,a.Insight),u=l(e.currentResonance,e.goalResonance,a.Resonance),d=n(e),m=Ve([h,u,d]);return yt(m)}const _t={__name:"ArcanistCalculate",props:{arcanist:{type:Object,required:!0}},setup(e){const a=e,n=D(()=>{const l=a.arcanist;return Le(l)});return(l,c)=>(w(),C("div",null,[j(pt,{class:"max-h-48",materialList:n.value},null,8,["materialList"])]))}},bt={class:"relative w-2/3 md:w-1/3 flex justify-center"},xt={key:0},wt=t("i",{class:"fa-regular fa-circle text-white"},null,-1),$t=[wt],kt={key:1},It=["src","alt"],At=t("div",{class:"flex items-center justify-center"},[t("i",{class:"fa-solid fa-caret-up text-blue-500"})],-1),Ct={class:"grid grid-cols-4 gap-1 p-3 border border-blue-300 rounded-md shadow-lg options-box custom-gradient-gray-blue"},St=["onClick"],Mt={class:"flex items-center justify-center font-semibold rounded-full w-8 h-8 leading-none flex-col bg-blue-500 text-white"},Nt={key:0},Ot=t("i",{class:"fa-regular fa-circle text-white"},null,-1),Rt=[Ot],Dt={key:1},Vt=["src","alt"],G={__name:"SelectList",props:{label:{type:String,required:!0},options:{type:Array,required:!0},selected:{type:Number}},emits:["update:selected"],setup(e,{emit:a}){const n=e,l=a,c=S(!1),r=S(n.selected),h=S(null),u=()=>{c.value=!0},d=()=>{c.value=!1},m=s=>{r.value=s,l("update:selected",s,n.label),c.value=!1},_=s=>`images/items/common/insight${s}.png`;return le(h,d),Ce(()=>{n.selected===void 0?(r.value=n.options[0],l("update:selected",n.options[0],n.label)):(r.value=n.selected,l("update:selected",n.selected,n.label))}),(s,f)=>(w(),C("div",bt,[t("button",{onClick:u,class:"btn btn-sm btn-ghost gradient-blue w-1/2 m-2"},[e.label==="Current Insight"||e.label==="Goal Insight"?(w(),C(T,{key:0},[r.value===0?(w(),C("div",xt,$t)):(w(),C("div",kt,[t("img",{class:"avatar w-6",src:_(r.value),alt:"Option "+r.value},null,8,It)]))],64)):(w(),C(T,{key:1},[H(V(r.value),1)],64))]),c.value?(w(),C("div",{key:0,ref_key:"containerRef",ref:h,class:"absolute mt-14 w-48 lg:w-64 z-50"},[At,t("div",Ct,[(w(!0),C(T,null,se(e.options,g=>(w(),C("button",{key:g,class:"m-1",onClick:y=>m(g)},[t("div",Mt,[e.label==="Current Insight"||e.label==="Goal Insight"?(w(),C(T,{key:0},[g===0?(w(),C("div",Nt,Rt)):(w(),C("div",Dt,[t("img",{src:_(g),alt:"Option "+g},null,8,Vt)]))],64)):(w(),C(T,{key:1},[H(V(g),1)],64))])],8,St))),128))])],512)):X("",!0)]))}},Lt={class:"edit-overlay"},jt={class:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-gray-800 to-blue-950 p-4 border-2 border-black rounded-md w-11/12 sm:max-w-2xl lg:h-auto"},Pt={class:"flex items-center p-2 mb-3 shadow-border-b"},Et={class:"flex items-center justify-center mr-2 space-x-3"},Ut={class:"text-1xl md:text-2xl text-white font-bold"},qt={class:"text-sm text-white",for:"raritySelect"},Wt={class:"ml-auto flex items-center space-x-3"},Ft={class:"tooltip","data-tip":"Hidden / Show"},Qt=t("i",{class:"fas fa-times"},null,-1),Bt=[Qt],Gt=t("div",{class:"custom-line"},null,-1),Tt=t("div",{class:"custom-label text-blue-100"},"Current Level",-1),zt={class:"mt-2 flex justify-center items-center leading-none"},Ht=t("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),Kt=t("div",{class:"custom-label text-blue-100"},"Goal Level",-1),Yt={class:"mt-2 flex justify-center items-center leading-none"},Zt=t("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),Jt=t("div",{class:"custom-label text-blue-100"},"Resonance",-1),Xt={class:"mt-2 flex justify-center items-center leading-none"},es=t("i",{class:"text-white fa-solid fa-angles-right text-center"},null,-1),ts={class:"flex justify-center space-x-4"},ss={key:0,class:"toast toast-middle toast-center"},ns=t("div",{class:"-translate-x-3 alert alert-info bg-red-300"},[t("span",null,"Current and Goal are the same!")],-1),as=[ns],ls={__name:"PlannerEdit",props:{selectedArcanist:{type:Object,required:!0},selectedArcanists:{type:Array,required:!0},listArcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},updateSelectedArcanists:{type:Function,required:!0},updateListArcanists:{type:Function,required:!0}},setup(e,{emit:a}){const n=e,l=a,c=E().arcanists.data,r=S(!1),h=S(0),u=E().calculations.data,d=S(c.find(M=>Number(M.Id)===Number(n.selectedArcanist.Id))),m=S(n.selectedArcanists),_=S(n.listArcanists),s=S(n.selectedArcanist.currentInsight),f=S(n.selectedArcanist.currentLevel),g=S(n.selectedArcanist.currentResonance),y=S(n.selectedArcanist.goalInsight),$=S(n.selectedArcanist.goalLevel),x=S(n.selectedArcanist.goalResonance),o=S(n.selectedArcanist.isVisible),v=D(()=>({Id:d.value.Id,isVisible:o.value,currentInsight:s.value,currentLevel:f.value,goalInsight:y.value,goalLevel:$.value,currentResonance:g.value,goalResonance:x.value})),p=D(()=>d.value.Rarity),i=D(()=>[0,...d.value.Insight.map(M=>M.Id)]),k=D(()=>i.value.filter(M=>M>=s.value)),b=D(()=>{const M=u.find(A=>A.Rarity.includes(d.value.Rarity)&&A.Insight==s.value);return M?[1,...Object.keys(M.Levels).map(Number).filter(A=>A%5===0)]:[]}),I=D(()=>{if(y.value===null)return[];const M=u.find(A=>A.Rarity.includes(d.value.Rarity)&&A.Insight==y.value);return M?y.value===s.value?[1,...Object.keys(M.Levels).map(Number).filter(A=>A%5===0)].filter(A=>A>=f.value):[1,...Object.keys(M.Levels).map(Number).filter(A=>A%5===0)]:[]}),O=D(()=>{if(s.value===null)return[];if(s.value===0)return g.value=0,[0];const M=Number(s.value);if(M===0)return g.value=null,null;const A=M*5;return Array.from({length:A},(R,J)=>Number(J+1))}),L=D(()=>{if(y.value===null)return[];if(y.value===0)return x.value=0,[0];const M=Number(y.value),A=Number(g.value);if(M===0)return x.value=null,null;const R=A||1,J=M*5;return Array.from({length:J-R+1},(N,Z)=>Number(R+Z))}),W=(M,A,R,J)=>Number(M)>Number(R)?!0:Number(M)<Number(R)?!1:Number(A)>Number(J),Q=()=>{if(s.value===y.value&&f.value===$.value&&g.value===x.value)return r.value=!0,setTimeout(()=>{r.value=!1},1e3),!0;r.value=!1},z=()=>{if(Q())return;const M=m.value.findIndex(A=>Number(A.Id)===Number(v.value.Id));M!==-1?m.value[M]={...m.value[M],...v.value}:m.value.push(v.value),_.value=_.value.filter(A=>A.Id!==v.value.Id),l("updateSelectedArcanists",m.value),l("updateListArcanists",_.value),l("closeOverlay")},K=()=>{const M=m.value.findIndex(A=>Number(A.Id)===Number(v.value.Id));M!==-1&&m.value.splice(M,1),ee()},ee=()=>{l("closeOverlay")},Y=(M,A)=>{switch(A){case"Current Insight":s.value=M;break;case"Current Level":f.value=M;break;case"Current Resonance":g.value=M;break;case"Goal Insight":y.value=M;break;case"Goal Level":$.value=M;break;case"Goal Resonance":x.value=M;break;case"Visible":o.value=M;break}};return Se([s,f,g,y,$,x],()=>{h.value+=1,f.value>b.value[b.value.length-1]&&(f.value=b.value[b.value.length-1]),$.value>I.value[I.value.length-1]&&($.value=I.value[I.value.length-1]),Number(g.value)>Number(x.value)&&(x.value=g.value),W(s.value,f.value,y.value,$.value)&&(y.value=s.value,$.value=f.value)}),(M,A)=>(w(),C("div",Lt,[t("div",jt,[t("div",Pt,[t("div",Et,[j(Ne,{class:"ml-2",arcanist:d.value},null,8,["arcanist"]),t("h2",Ut,V(d.value.Name),1),t("label",qt,[H(V(p.value)+" ",1),t("i",{class:te(["fa-solid fa-star",{"text-orange-300":p.value===6,"text-yellow-100":p.value===5,"text-purple-400":p.value===4,"text-sky-200":p.value===3,"text-green-200":p.value===2}])},null,2)]),t("div",{class:"tooltip","data-tip":"Remove Arcanist"},[t("i",{onClick:K,class:"fas fa-trash-alt text-gray-500"})])]),t("div",Wt,[t("div",Ft,[t("div",{onClick:A[0]||(A[0]=R=>o.value=!o.value),class:te(["badge badge-ghost",o.value?"green-badge":"red-badge"])},[t("i",{class:te(o.value?"fa-regular fa-eye":"fa-regular fa-eye-slash")},null,2)],2)]),t("button",{onClick:ee,class:"text-white"},Bt)])]),Gt,Tt,t("div",zt,[(w(),B(G,{key:h.value,modelValue:s.value,"onUpdate:modelValue":A[1]||(A[1]=R=>s.value=R),selected:s.value,label:"Current Insight",options:i.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"])),Ht,(w(),B(G,{key:h.value,modelValue:f.value,"onUpdate:modelValue":A[2]||(A[2]=R=>f.value=R),selected:f.value,label:"Current Level",options:b.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"]))]),Kt,t("div",Yt,[(w(),B(G,{key:h.value,modelValue:y.value,"onUpdate:modelValue":A[3]||(A[3]=R=>y.value=R),selected:y.value,label:"Goal Insight",options:k.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"])),Zt,(w(),B(G,{key:h.value,modelValue:$.value,"onUpdate:modelValue":A[4]||(A[4]=R=>$.value=R),selected:$.value,label:"Goal Level",options:I.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"]))]),Jt,t("div",Xt,[(w(),B(G,{key:h.value,modelValue:g.value,"onUpdate:modelValue":A[5]||(A[5]=R=>g.value=R),selected:g.value,label:"Current Resonance",options:O.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"])),es,(w(),B(G,{key:h.value,modelValue:x.value,"onUpdate:modelValue":A[6]||(A[6]=R=>x.value=R),selected:x.value,label:"Goal Resonance",options:L.value,"onUpdate:selected":Y},null,8,["modelValue","selected","options"]))]),t("div",ts,[t("button",{onClick:z,class:"btn btn-success"},"Save"),r.value?(w(),C("div",ss,as)):X("",!0)]),j(_t,{arcanist:v.value},null,8,["arcanist"])])]))}},os=["data-tip"],is={class:"rounded-md overflow-hidden"},rs={class:"avatar"},cs=["src","alt"],us={__name:"ArcanistIconToggle",props:{arcanist:{type:Number,required:!0},visible:{type:Boolean,required:!0}},setup(e){const a=e,n=E().arcanists.data.find(c=>c.Id===a.arcanist),l=c=>`images/arcanists/icon/${c}.png`;return(c,r)=>(w(),C("div",{class:"tooltip","data-tip":P(n).Name},[t("div",is,[t("div",rs,[t("div",{class:te(["w-12 rounded",{"filter-grayscale opacity-50":!e.visible,"bg-orange-300":P(n).Rarity===6,"bg-yellow-100":P(n).Rarity===5,"bg-purple-400":P(n).Rarity===4,"bg-sky-200":P(n).Rarity===3,"bg-green-200":P(n).Rarity===2}])},[t("img",{src:l(P(n).Id),alt:P(n).Name},null,8,cs)],2)])])],8,os))}},ds=ue(us,[["__scopeId","data-v-4482658f"]]),hs={class:"flex flex-row flex-wrap justify-center space-x-2"},fs=t("p",{class:"text-center text-slate-300 text-sm opacity-70"},"Left click to edit, right click to show / hide.",-1),vs={__name:"PlannerSelector",props:{selectedArcanists:{type:Array,required:!0}},emits:["open-edit-overlay"],setup(e,{emit:a}){const n=e,l=a,c=S(n.selectedArcanists),r=u=>{l("open-edit-overlay",u)},h=u=>{u.isVisible=!u.isVisible};return(u,d)=>(w(),C("div",null,[t("div",hs,[(w(!0),C(T,null,se(c.value,m=>(w(),B(ds,{arcanist:m.Id,visible:m.isVisible,onClick:_=>r(m),onContextmenu:Ge(_=>h(m),["prevent"])},null,8,["arcanist","visible","onClick","onContextmenu"]))),256))]),fs]))}},F=ce("warehouse",{state:()=>({isActive:!1,data:[],loaded:!1}),actions:{toggle(){this.isActive=!this.isActive},setData(e){this.data=e},setLoaded(){this.loaded=!0},addItem(e,a){this.data.push({Material:e,Quantity:0,Category:a})},removeItem(e){for(let a=0;a<this.data.length;a++)this.data[a].Material===e&&this.data.splice(a,1)},addShopItem(e,a){for(let n=0;n<this.data.length;n++)if(this.data[n].Material===e){this.data[n].Quantity+=Number(a);break}},updateItem(e,a){for(let n=0;n<this.data.length;n++)if(this.data[n].Material===e){this.data[n].Quantity=Number(a);break}},itemExists(e){for(let a=0;a<this.data.length;a++)if(this.data[a].Material===e)return!0;return!1},resetAll(){this.data=[]},resetCategory(e){for(let a=0;a<this.data.length;a++)this.data[a].Category===e&&(this.data[a].Quantity=0)}},persist:!0}),q=(e,a,n)=>e.matrix[Math.imul(a,e.width)+n],U=(e,a,n,l)=>{e.matrix[Math.imul(a,e.width)+n]=l},he=e=>typeof e[Symbol.iterator]=="function"?e:Object.entries(e),we=e=>e===!0?!0:e===!1?new Set:e instanceof Set?e:new Set(e),ps=e=>{const{direction:a,objective:n,integers:l,binaries:c}=e,r=a==="minimize"?-1:1,h=he(e.constraints),u=he(e.variables),d=Array.isArray(u)?u:Array.from(u),m=[],_=[];if(l!=null||c!=null){const i=we(c),k=i===!0?!0:we(l);for(let b=1;b<=d.length;b++){const[I]=d[b-1];i===!0||i.has(I)?(m.push(b),_.push(b)):(k===!0||k.has(I))&&_.push(b)}}const s=new Map;for(const[i,k]of h){const b=s.get(i)??{row:NaN,lower:-1/0,upper:1/0};b.lower=Math.max(b.lower,k.equal??k.min??-1/0),b.upper=Math.min(b.upper,k.equal??k.max??1/0),s.has(i)||s.set(i,b)}let f=1;for(const i of s.values())i.row=f,f+=(Number.isFinite(i.lower)?1:0)+(Number.isFinite(i.upper)?1:0);const g=d.length+1,y=f+m.length,$=g+y,x=new Float64Array(g*y),o=new Int32Array($),v=new Int32Array($),p={matrix:x,width:g,height:y,positionOfVariable:o,variableAtPosition:v};for(let i=0;i<$;i++)o[i]=i,v[i]=i;for(let i=1;i<g;i++)for(const[k,b]of he(d[i-1][1])){k===n&&U(p,0,i,r*b);const I=s.get(k);I!=null&&(Number.isFinite(I.upper)?(U(p,I.row,i,b),Number.isFinite(I.lower)&&U(p,I.row+1,i,-b)):Number.isFinite(I.lower)&&U(p,I.row,i,-b))}for(const i of s.values())Number.isFinite(i.upper)?(U(p,i.row,0,i.upper),Number.isFinite(i.lower)&&U(p,i.row+1,0,-i.lower)):Number.isFinite(i.lower)&&U(p,i.row,0,-i.lower);for(let i=0;i<m.length;i++){const k=f+i;U(p,k,0,1),U(p,k,m[i],1)}return{tableau:p,sign:r,variables:d,integers:_}},je=(e,a)=>{const n=Math.round(1/a);return Math.round((e+Number.EPSILON)*n)/n},Pe=(e,a,n)=>{const l=q(e,a,n),c=e.variableAtPosition[e.width+a],r=e.variableAtPosition[n];e.variableAtPosition[e.width+a]=r,e.variableAtPosition[n]=c,e.positionOfVariable[c]=n,e.positionOfVariable[r]=e.width+a;const h=[];for(let u=0;u<e.width;u++){const d=q(e,a,u);Math.abs(d)>1e-16?(U(e,a,u,d/l),h.push(u)):U(e,a,u,0)}U(e,a,n,1/l);for(let u=0;u<e.height;u++){if(u===a)continue;const d=q(e,u,n);if(Math.abs(d)>1e-16){for(let m=0;m<h.length;m++){const _=h[m];U(e,u,_,q(e,u,_)-d*q(e,a,_))}U(e,u,n,-d/l)}}},Ee=(e,a,n,l)=>{e.push([a.variableAtPosition[a.width+n],a.variableAtPosition[l]]);for(let c=6;c<=Math.trunc(e.length/2);c++){let r=!0;for(let h=0;h<c;h++){const u=e.length-1-h,[d,m]=e[u],[_,s]=e[u-c];if(d!==_||m!==s){r=!1;break}}if(r)return!0}return!1},ms=(e,a)=>{const n=[],{precision:l,maxPivots:c,checkCycles:r}=a;for(let h=0;h<c;h++){let u=0,d=l;for(let s=1;s<e.width;s++){const f=q(e,0,s);f>d&&(d=f,u=s)}if(u===0)return["optimal",je(q(e,0,0),l)];let m=0,_=1/0;for(let s=1;s<e.height;s++){const f=q(e,s,u);if(f<=l)continue;const y=q(e,s,0)/f;if(y<_&&(m=s,_=y,y<=l))break}if(m===0)return["unbounded",u];if(r&&Ee(n,e,m,u))return["cycled",NaN];Pe(e,m,u)}return["cycled",NaN]},Ue=(e,a)=>{const n=[],{precision:l,maxPivots:c,checkCycles:r}=a;for(let h=0;h<c;h++){let u=0,d=-l;for(let s=1;s<e.height;s++){const f=q(e,s,0);f<d&&(d=f,u=s)}if(u===0)return ms(e,a);let m=0,_=-1/0;for(let s=1;s<e.width;s++){const f=q(e,u,s);if(f<-l){const g=-q(e,0,s)/f;g>_&&(_=g,m=s)}}if(m===0)return["infeasible",NaN];if(r&&Ee(n,e,u,m))return["cycled",NaN];Pe(e,u,m)}return["cycled",NaN]};var gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ys(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qe={exports:{}};(function(e,a){(function(){var n,l,c,r,h,u,d,m,_,s,f,g,y,$,x;c=Math.floor,s=Math.min,l=function(o,v){return o<v?-1:o>v?1:0},_=function(o,v,p,i,k){var b;if(p==null&&(p=0),k==null&&(k=l),p<0)throw new Error("lo must be non-negative");for(i==null&&(i=o.length);p<i;)b=c((p+i)/2),k(v,o[b])<0?i=b:p=b+1;return[].splice.apply(o,[p,p-p].concat(v)),v},u=function(o,v,p){return p==null&&(p=l),o.push(v),$(o,0,o.length-1,p)},h=function(o,v){var p,i;return v==null&&(v=l),p=o.pop(),o.length?(i=o[0],o[0]=p,x(o,0,v)):i=p,i},m=function(o,v,p){var i;return p==null&&(p=l),i=o[0],o[0]=v,x(o,0,p),i},d=function(o,v,p){var i;return p==null&&(p=l),o.length&&p(o[0],v)<0&&(i=[o[0],v],v=i[0],o[0]=i[1],x(o,0,p)),v},r=function(o,v){var p,i,k,b,I,O;for(v==null&&(v=l),b=(function(){O=[];for(var L=0,W=c(o.length/2);0<=W?L<W:L>W;0<=W?L++:L--)O.push(L);return O}).apply(this).reverse(),I=[],i=0,k=b.length;i<k;i++)p=b[i],I.push(x(o,p,v));return I},y=function(o,v,p){var i;if(p==null&&(p=l),i=o.indexOf(v),i!==-1)return $(o,0,i,p),x(o,i,p)},f=function(o,v,p){var i,k,b,I,O;if(p==null&&(p=l),k=o.slice(0,v),!k.length)return k;for(r(k,p),O=o.slice(v),b=0,I=O.length;b<I;b++)i=O[b],d(k,i,p);return k.sort(p).reverse()},g=function(o,v,p){var i,k,b,I,O,L,W,Q,z;if(p==null&&(p=l),v*10<=o.length){if(b=o.slice(0,v).sort(p),!b.length)return b;for(k=b[b.length-1],W=o.slice(v),I=0,L=W.length;I<L;I++)i=W[I],p(i,k)<0&&(_(b,i,0,null,p),b.pop(),k=b[b.length-1]);return b}for(r(o,p),z=[],O=0,Q=s(v,o.length);0<=Q?O<Q:O>Q;0<=Q?++O:--O)z.push(h(o,p));return z},$=function(o,v,p,i){var k,b,I;for(i==null&&(i=l),k=o[p];p>v;){if(I=p-1>>1,b=o[I],i(k,b)<0){o[p]=b,p=I;continue}break}return o[p]=k},x=function(o,v,p){var i,k,b,I,O;for(p==null&&(p=l),k=o.length,O=v,b=o[v],i=2*v+1;i<k;)I=i+1,I<k&&!(p(o[i],o[I])<0)&&(i=I),o[v]=o[i],v=i,i=2*v+1;return o[v]=b,$(o,O,v,p)},n=function(){o.push=u,o.pop=h,o.replace=m,o.pushpop=d,o.heapify=r,o.updateItem=y,o.nlargest=f,o.nsmallest=g;function o(v){this.cmp=v??l,this.nodes=[]}return o.prototype.push=function(v){return u(this.nodes,v,this.cmp)},o.prototype.pop=function(){return h(this.nodes,this.cmp)},o.prototype.peek=function(){return this.nodes[0]},o.prototype.contains=function(v){return this.nodes.indexOf(v)!==-1},o.prototype.replace=function(v){return m(this.nodes,v,this.cmp)},o.prototype.pushpop=function(v){return d(this.nodes,v,this.cmp)},o.prototype.heapify=function(){return r(this.nodes,this.cmp)},o.prototype.updateItem=function(v){return y(this.nodes,v,this.cmp)},o.prototype.clear=function(){return this.nodes=[]},o.prototype.empty=function(){return this.nodes.length===0},o.prototype.size=function(){return this.nodes.length},o.prototype.clone=function(){var v;return v=new o,v.nodes=this.nodes.slice(0),v},o.prototype.toArray=function(){return this.nodes.slice(0)},o.prototype.insert=o.prototype.push,o.prototype.top=o.prototype.peek,o.prototype.front=o.prototype.peek,o.prototype.has=o.prototype.contains,o.prototype.copy=o.prototype.clone,o}(),function(o,v){return e.exports=v()}(this,function(){return n})}).call(gs)})(qe);var _s=qe.exports,bs=_s;const xs=ys(bs),$e=(e,a)=>({matrix:new Float64Array(e),positionOfVariable:new Int32Array(a),variableAtPosition:new Int32Array(a)}),ws=(e,{matrix:a,positionOfVariable:n,variableAtPosition:l},c)=>{const{width:r,height:h}=e;a.set(e.matrix);for(let d=0;d<c.length;d++){const[m,_,s]=c[d],f=(h+d)*r,g=e.positionOfVariable[_];if(g<r)a[f]=m*s,a.fill(0,f+1,f+r),a[f+g]=m;else{const y=(g-r)*r;a[f]=m*(s-a[y]);for(let $=1;$<r;$++)a[f+$]=-m*a[y+$]}}n.set(e.positionOfVariable),l.set(e.variableAtPosition);const u=r+h+c.length;for(let d=r+h;d<u;d++)n[d]=d,l[d]=d;return{matrix:a.subarray(0,e.matrix.length+r*c.length),width:r,height:h+c.length,positionOfVariable:n.subarray(0,u),variableAtPosition:l.subarray(0,u)}},ke=(e,a)=>{let n=0,l=0,c=0;for(let r=0;r<a.length;r++){const h=a[r],u=e.positionOfVariable[h]-e.width;if(u<0)continue;const d=q(e,u,0),m=Math.abs(d-Math.round(d));m>n&&(n=m,l=h,c=d)}return[l,c,n]},$s=(e,a,n)=>{const{tableau:l,sign:c,integers:r}=e,{precision:h,maxIterations:u,tolerance:d,timeout:m}=n,[_,s,f]=ke(l,r);if(f<=h)return[e,"optimal",a];const g=new xs((z,K)=>z[0]-K[0]);g.push([a,[[-1,_,Math.ceil(s)]]]),g.push([a,[[1,_,Math.floor(s)]]]);const y=r.length*2,$=l.matrix.length+y*l.width,x=l.positionOfVariable.length+y;let o=$e($,x),v=$e($,x);const p=a*(1-c*d),i=m+Date.now();let k=Date.now()>=i,b=!1,I=1/0,O=l,L=0;for(;L<u&&!g.empty()&&I>=p&&!k;){const[z,K]=g.pop();if(z>I)break;const ee=ws(l,o,K),[Y,M]=Ue(ee,n);if(Y==="optimal"&&M<I){const[A,R,J]=ke(ee,r);if(J<=h){b=!0,I=M,O=ee;const N=v;v=o,o=N}else{const N=[],Z=[];for(let ae=0;ae<K.length;ae++){const ie=K[ae],[Qe,Be]=ie;Be===A?Qe<0?Z.push(ie):N.push(ie):(N.push(ie),Z.push(ie))}Z.push([1,A,Math.floor(R)]),N.push([-1,A,Math.ceil(R)]),g.push([M,N]),g.push([M,Z])}}k=Date.now()>=i,L++}const Q=(k||L>=u)&&!g.empty()&&I>=p?"timedout":b?"optimal":"infeasible";return[{...e,tableau:O},Q,b?I:NaN]},Ie=({tableau:e,sign:a,variables:n},l,c,{precision:r,includeZeroVariables:h})=>{if(l==="optimal"||l==="timedout"&&!Number.isNaN(c)){const u=[];for(let d=0;d<n.length;d++){const[m]=n[d],_=e.positionOfVariable[d+1]-e.width,s=_>=0?q(e,_,0):0;s>r?u.push([m,je(s,r)]):h&&u.push([m,0])}return{status:l,result:-a*c,variables:u}}else if(l==="unbounded"){const u=e.variableAtPosition[c]-1;return{status:"unbounded",result:a*(1/0),variables:0<=u&&u<n.length?[[n[u][0],1/0]]:[]}}else return{status:l,result:NaN,variables:[]}},ks={precision:1e-8,checkCycles:!1,maxPivots:8192,tolerance:0,timeout:1/0,maxIterations:32768,includeZeroVariables:!1},Is=(e,a)=>{const n=ps(e),l={...ks,...a},[c,r]=Ue(n.tableau,l);if(n.integers.length===0||c!=="optimal")return Ie(n,c,r,l);{const[h,u,d]=$s(n,r,l);return Ie(h,u,d,l)}},re=E().items.data,As=E().formulas.data,We=F().data;function Cs(e){const n=re.find(c=>c.Name===e.Material).Rarity,l=e.Quantity;return n===3?l*40:n===4?l*100:n===5?l*250:n===6?l*1500:0}function Ss(e){return e==="Oneiric Shop"?"images/items/common/1.png":"images/items/common/0.png"}function Fe(e,a,n,l,c){return{stage:e,runs:isNaN(a)?0:a,activity:isNaN(n)?0:n,days:isNaN(l)?0:l,materials:c,activityImagePath:Ss(e)}}function Ae(e,a){let n=a.find(l=>l.stage===e);return n||(n=Fe(e,null,e==="Oneiric Shop"?0:null,null,[]),a.push(n)),n}function fe(e,a){return e.sort((n,l)=>{const c=Object.values(a).find(h=>h===n.stage),r=Object.values(a).find(h=>h===l.stage);return c&&r?c.id-r.id:c?-1:r?1:0})}function Ms(e){return e.sort((a,n)=>n.runs-a.runs)}function Ns(e){return e.forEach(a=>{const n=We.find(l=>l.Category==="Resonate Material"&&l.Material===a.Material);n&&(a.Quantity-=n.Quantity)}),e}function Os(){return _e().settings.unreleasedDrops?E().drops1_4.data:E().drops.data}function Rs(e,a){const n={},l={},c=["Sinuous Howl","Interlaced Shudder","Hypocritical Murmur","Hoarse Echo","Sonorous Knell","Brief Cacophony","Moment of Dissonance","Crystal Casket"];e.forEach(({Material:g,Quantity:y})=>{c.includes(g)||(l[g]={min:y})});const r={},h=[];for(let{Name:g,Material:y,Quantity:$}of As){if(n[g]={min:0},y.length===0)continue;const x={};y.forEach((v,p)=>{x[v]=-$[p]});const o=`Wilderness Wishing Spring - ${g}`;r[o]={[g]:1,...x,cost:0},h.includes(o)||h.push(o)}const u={};for(let g in a){const y=a[g],{count:$,cost:x,drops:o}=y;u[g]={cost:x};for(let v in o)u[g][v]=o[v]/$}const d={...n,...l};We.forEach(g=>{const{Material:y,Quantity:$}=g,x=parseInt($);x>0&&(d[y]?d[y]={min:d[y].min-x}:d[y]={min:-x})});const m=Object.assign({},r,u),f=Is({objective:"cost",direction:"minimize",constraints:d,variables:m,integers:h},{maxIterations:1048576,tolerance:.25});return f.status!=="optimal"&&(console.log(`%cStatus: ${f.status}`,"background-color: yellow; color: black;"),console.log("constraints: ",d),console.log("variables: ",m)),f}function Ds(e){const a=[],n=Os();let l=0;function c(s){if(s.Quantity<=0||re.find(g=>g.Name===s.Material).Category!=="Resonate Material")return;const f=Ae("Oneiric Shop",a);f.materials.push(s),f.activity+=Cs(s)}if(e.forEach(s=>{re.find(f=>f.Name===s.Material).Category!=="Resonate Material"||re.find(f=>f.Name===s.Material).Rarity!==6||(l+=s.Quantity,s.Quantity=0)}),l>0){const s={Material:"Crystal Casket",Quantity:l};e.unshift(s)}Ns(e),e.forEach(s=>{c(s)}),Rs(e,n).variables.forEach(s=>{const f=n[s[0]];if(f){const g=Math.ceil(s[1]),y=Math.ceil(g*f.cost),$=(y/240).toFixed(1);let x=Object.entries(f.drops).map(([v,p])=>{let i=p/f.count*g;return i=i%1>=.99?Math.ceil(i):Math.floor(i),{Material:v,Quantity:i}});x=x.filter(v=>v.Quantity>0);const o=Fe(s[0],g,y,$,x);a.push(o)}else{const $={Material:s[0].split("-")[1].trim(),Quantity:s[1]};Ae("Wilderness Wishing Spring",a).materials.push($)}});const h=a.filter(s=>["The Poussiere VI","Mintage Aesthetics VI","Oneiric Shop"].includes(s.stage)&&s.materials.length>0),u=a.filter(s=>(s.stage.endsWith("II")||s.stage.endsWith("IV")||s.stage.endsWith("VI"))&&!h.some(f=>f.stage===s.stage)&&s.materials.length>0),d=a.filter(s=>!["Wilderness Wishing Spring",...h.map(f=>f.stage),...u.map(f=>f.stage)].includes(s.stage)&&s.materials.length>0),m=a.filter(s=>["Wilderness Wishing Spring"].includes(s.stage)&&s.materials.length>0);return[{id:0,cards:fe(h,n)},{id:1,cards:fe(u,n)},{id:2,cards:Ms(d)},{id:3,cards:fe(m,n)}]}function Vs(e){let a=0,n=0;return e.forEach(l=>{l.cards.forEach(c=>{c.days!==null&&(a+=c.activity,n+=parseFloat(c.days))})}),[a,n.toFixed(0)]}const Ls=e=>(ge("data-v-e34a7b38"),e=e(),ye(),e),js={class:"bg-gray-700/40 shadow rounded flex flex-col items-center justify-between relative"},Ps={class:"stage text-white p-2"},Es={class:"tooltip w-full","data-tip":"Number of runs | Activities | Days"},Us={class:"calculations flex justify-center items-center bg-gradient-to-r from-blue-800/70 to-blue-900/90 text-white p-2 rounded-md"},qs={class:"border-blue-700/90 border-r pr-3"},Ws={key:0},Fs=Ls(()=>t("i",{class:"fa-solid fa-xmark text-xs mr-0.5"},null,-1)),Qs={key:1},Bs={class:"pl-2"},Gs=["src"],Ts={class:"border-blue-700/90 border-l pl-3"},zs={__name:"Card",props:{card:{type:Object,required:!0}},setup(e){const a=e,n=D(()=>a.card.materials.length<4),l=S(null);return Se(n,c=>{c&&l.value&&(l.value.scrollLeft=0)}),(c,r)=>(w(),C("div",js,[t("div",Ps,[t("p",null,V(e.card.stage),1)]),t("div",Es,[t("div",Us,[t("p",qs,[e.card.runs>0?(w(),C("span",Ws,[Fs,H(V(e.card.runs),1)])):(w(),C("span",Qs,V(e.card.runs),1))]),t("p",Bs,V(e.card.activity==null?"Crafted from available Materials":e.card.activity),1),ne(t("img",{src:e.card.activityImagePath,alt:"Activity Image",class:"inline-block w-8 h-8"},null,8,Gs),[[Te,e.card.activity]]),t("p",Ts,V(e.card.days)+" "+V(e.card.days===null?"":e.card.days>1?"days":"day"),1)])]),t("div",{ref_key:"scrollDiv",ref:l,class:te([{"custom-scrollbar":n.value},"flex overflow-y-hidden overflow-x-auto scrollbar m-auto"])},[(w(!0),C(T,null,se(e.card.materials,(h,u)=>(w(),C("div",{key:u,class:"flex-shrink-0"},[j(Re,{class:"",material:h},null,8,["material"])]))),128))],2)]))}},Hs=ue(zs,[["__scopeId","data-v-e34a7b38"]]),Ks={class:"w-full mb-4 flex flex-col"},Ys={__name:"PlannerLayer",props:{layer:{type:Object,required:!0}},setup(e){const a=e,n=D(()=>a.layer.cards&&a.layer.cards.length>0),l=D(()=>{switch(a.layer.id){case 0:return"yellow-badge";case 1:return"indigo-badge";case 2:return"purple-badge";case 3:return"green-badge";default:return"red-badge"}}),c=D(()=>{switch(a.layer.id){case 0:return"Resources";case 1:return"Insight";case 2:return"Hard Stages";case 3:return"Crafting";default:return"Undefined"}}),r=D(()=>{switch(a.layer.id){case 2:return"mb-2 gap-5 grid grid-cols-1 lg:grid-cols-2";case 3:return"mb-2 gap-5 grid grid-cols-1";default:return"mb-2 gap-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"}});return(h,u)=>(w(),C("div",Ks,[n.value?(w(),C("div",{key:0,class:te(["badge badge-lg badge-ghost mt-2 mb-2 w-32",l.value])},V(c.value),3)):X("",!0),t("div",{class:te(r.value)},[(w(!0),C(T,null,se(e.layer.cards,(d,m)=>(w(),B(Hs,{key:m,card:d},null,8,["card"]))),128))],2)]))}},Zs={class:"flex flex-wrap"},Js={__name:"PlannerResult",props:{selectedArcanists:{type:Array,required:!0}},emits:["update:totalActivityAndDays"],setup(e,{emit:a}){const n=e,l=a,c=S([]),r=S([]);return Me(()=>{const h=n.selectedArcanists.map(m=>m.isVisible?Le(m):[]),u=Ve(h);c.value=u;const d=Ds(u);l("update:totalActivityAndDays",Vs(d)),r.value=d}),(h,u)=>(w(),C("div",Zs,[(w(!0),C(T,null,se(r.value,(d,m)=>(w(),B(Ys,{key:m,layer:d},null,8,["layer"]))),128))]))}},Xs="/Kornblume/images/items/common/0.png",en="/Kornblume/images/items/icon/55.png",tn="/Kornblume/images/items/icon/54.png",de=e=>(ge("data-v-dbe2ab05"),e=e(),ye(),e),sn={class:"flex custom-gradient-gray-blue-light px-2 py-2 md:px-4 lg:px-6 rounded-md items-center justify-center"},nn=de(()=>t("i",{class:"fa-solid fa-calculator text-white mr-3"},null,-1)),an={class:"tooltip flex items-center","data-tip":"Estimated total Activities and Days"},ln={class:"text"},on=de(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:Xs,alt:"avatar"})])],-1)),rn={class:"text pr-3"},cn={class:"tooltip","data-tip":"Wilderness Production"},un={class:"text"},dn=de(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:en,alt:"avatar"})])],-1)),hn={class:"tooltip","data-tip":"Wilderness Production"},fn={class:"text"},vn=de(()=>t("div",{class:"avatar"},[t("div",{class:"w-8 rounded"},[t("img",{src:tn,alt:"avatar"})])],-1)),pn={__name:"PlannerTotal",props:{totalActivityAndDays:{type:Array,required:!0},wildernessSettings:{type:Object,required:!0}},setup(e){return(a,n)=>(w(),C("div",sn,[nn,t("div",an,[t("div",ln,V(e.totalActivityAndDays[0]),1),on,t("div",rn,V(e.totalActivityAndDays[1])+" "+V(e.totalActivityAndDays[1]>1?"days":"day"),1)]),t("div",cn,[t("div",un,V(P(pe)(e.wildernessSettings.wildernessOutput.dust*e.totalActivityAndDays[1])),1)]),dn,t("div",hn,[t("div",fn,V(P(pe)(e.wildernessSettings.wildernessOutput.gold*e.totalActivityAndDays[1])),1)]),vn]))}},mn=ue(pn,[["__scopeId","data-v-dbe2ab05"]]),oe=e=>(ge("data-v-9672159b"),e=e(),ye(),e),gn={class:"list-overlay"},yn={class:"custom-modal-small h-auto"},_n=oe(()=>t("i",{class:"fas fa-times"},null,-1)),bn=[_n],xn=oe(()=>t("div",{class:"custom-label text-yellow-100"},"Dust Bell Towers",-1)),wn={class:"grid grid-cols-3"},$n=oe(()=>t("div",{class:"custom-label text-yellow-100"},"Gold Bell Towers",-1)),kn={class:"grid grid-cols-3"},In=oe(()=>t("div",{class:"custom-label text-yellow-100"},"Vigor (%)",-1)),An={class:"grid grid-cols-2 p-2 items-center"},Cn={class:"tooltip","data-tip":"Collect once a day"},Sn={class:"form-control"},Mn={class:"cursor-pointer label justify-center"},Nn=oe(()=>t("span",{class:"label-text text-yellow-100 mr-3"},"Lazy Modo",-1)),On=["checked"],Rn=oe(()=>t("div",{class:"custom-label text-yellow-100"},"Output",-1)),Dn={class:"grid grid-cols-2 p-2"},Vn={class:"tooltip","data-tip":"Dust"},Ln={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},jn={class:"tooltip","data-tip":"Sharpodonty"},Pn={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},En={__name:"PlannerWilderness",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveWildernessSettings:{type:Function,required:!0}},setup(e,{emit:a}){const n=e,l=a,c=()=>{l("closeOverlay")},r=S(n.settings.dust1),h=S(n.settings.dust2),u=S(n.settings.dust3),d=S(n.settings.gold1),m=S(n.settings.gold2),_=S(n.settings.gold3),s=S(n.settings.vigor),f=S(n.settings.lazyModo),g=[0,1,2,3,4,5,6],y=[0,120,150,175,210,240,270],$=[0,60,75,80,96,108,120],x=(i,k)=>{switch(k){case"Dust 1":r.value=i;break;case"Dust 2":h.value=i;break;case"Dust 3":u.value=i;break;case"Gold 1":d.value=i;break;case"Gold 2":m.value=i;break;case"Gold 3":_.value=i;break}},o=()=>{const i=parseInt(s.value,10);if(isNaN(i)){s.value=null;return}if(i<0){s.value=0;return}if(i>50){s.value=50;return}s.value=i},v=()=>{const i={dust1:r.value,dust2:h.value,dust3:u.value,gold1:d.value,gold2:m.value,gold3:_.value,vigor:s.value,lazyModo:f.value,wildernessOutput:p.value};l("saveWildernessSettings",i),c()},p=D(()=>{const i=y[r.value]+y[h.value]+y[u.value],k=$[d.value]+$[m.value]+$[_.value],b=s.value?parseFloat(s.value/100):0,I=f.value?20:24,O=Math.ceil(i*(1+b)*I),L=Math.ceil(k*(1+b)*I);return{dust:O,gold:L}});return(i,k)=>(w(),C("div",gn,[t("div",yn,[t("button",{onClick:c,class:"absolute top-2 right-4 text-white"},bn),xn,t("div",wn,[j(G,{class:"select-list",options:g,selected:r.value,label:"Dust 1","onUpdate:selected":x},null,8,["selected"]),j(G,{class:"select-list",options:g,selected:h.value,label:"Dust 2","onUpdate:selected":x},null,8,["selected"]),j(G,{class:"select-list",options:g,selected:u.value,label:"Dust 3","onUpdate:selected":x},null,8,["selected"])]),$n,t("div",kn,[j(G,{class:"select-list",options:g,selected:d.value,label:"Gold 1","onUpdate:selected":x},null,8,["selected"]),j(G,{class:"select-list",options:g,selected:m.value,label:"Gold 2","onUpdate:selected":x},null,8,["selected"]),j(G,{class:"select-list",options:g,selected:_.value,label:"Gold 3","onUpdate:selected":x},null,8,["selected"])]),In,t("div",An,[ne(t("input",{onInput:o,"onUpdate:modelValue":k[0]||(k[0]=b=>s.value=b),type:"text",placeholder:"Vigor",class:"input input-bordered input-info input-sm mx-10 lg:mx-5 gradient-blue text-center"},null,544),[[me,s.value]]),t("div",Cn,[t("div",Sn,[t("label",Mn,[Nn,ne(t("input",{"onUpdate:modelValue":k[1]||(k[1]=b=>f.value=b),type:"checkbox",checked:f.value,class:"checkbox checkbox-info"},null,8,On),[[ve,f.value]])])])])]),Rn,t("div",Dn,[t("div",Vn,[t("label",Ln,V(p.value.dust),1)]),t("div",jn,[t("label",Pn,V(p.value.gold),1)])]),t("div",{class:"flex justify-center"},[t("button",{onClick:v,class:"btn btn-success"},"Save")])])]))}},Un=ue(En,[["__scopeId","data-v-9672159b"]]);function qn(e){const a=E().shops.data;e in a?a[e].forEach(l=>{const{Material:c,Quantity:r}=l;F().addShopItem(c,r)}):console.error(`Version ${e} not found in shops data.`)}const Wn={class:"pb-6"},Fn={class:"relative inline-block"},Qn=["src"],Bn=["src"],Gn={__name:"ItemWarehouse",props:{material:{type:Object,required:!0}},setup(e,{emit:a}){const n=e,l=a,c=S(n.material.Quantity),r=D(()=>Oe(n.material)),h=()=>{l("update:quantity",Number(c.value))};return(u,d)=>(w(),C("div",Wn,[t("div",Fn,[t("img",{src:r.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,Qn),t("img",{src:r.value.itemImagePath,alt:"Material Image",class:"w-20 h-20"},null,8,Bn),ne(t("input",{"onUpdate:modelValue":d[0]||(d[0]=m=>c.value=m),onInput:h,type:"text",placeholder:"",class:"bg-slate-600 text-white absolute -bottom-3 left-3 w-14 input input-xs rounded-t-none text-center"},null,544),[[me,c.value]])])]))}},Tn={class:"list-overlay"},zn={class:"custom-modal-big h-5/6 lg:h-2/3 flex flex-col items-center"},Hn=t("i",{class:"fas fa-times"},null,-1),Kn=[Hn],Yn=t("p",{class:"text-white text-center font-bold text-lg"}," Warehouse ",-1),Zn={class:"grid grid-cols-2 xl:grid-cols-4 justify-center items-center pb-5 text-center"},Jn={class:"form-control items-center"},Xn={class:"label cursor-pointer space-x-2"},ea=t("span",{class:"label-text text-error text-xs font-bold"},"Base Item",-1),ta={class:"form-control items-center"},sa={class:"label cursor-pointer space-x-2"},na=t("span",{class:"label-text text-info text-xs font-bold"},"Build Material",-1),aa={class:"form-control items-center"},la={class:"label cursor-pointer space-x-2"},oa=t("span",{class:"label-text text-success text-xs font-bold"},"Insight Material",-1),ia={class:"form-control items-center"},ra={class:"label cursor-pointer space-x-2"},ca=t("span",{class:"label-text text-warning text-xs font-bold"},"Resonate Material",-1),ua={class:"custom-scrollbar overflow-y-scroll overflow-x-hidden flex-grow mb-5"},da={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-8"},ha={class:"flex space-x-10"},fa={class:"flex space-x-3"},va=t("button",{class:"btn btn-success btn-sm",onclick:"my_modal_shop1.showModal()"},"1.2 pt.1",-1),pa={id:"my_modal_shop1",class:"modal"},ma={class:"modal-box bg-slate-700"},ga=t("p",{class:"py-4 text-lg text-white text-center"},[H("Add materials from "),t("span",{class:"text-error"},"1.2 part 1"),H(" event shop?")],-1),ya=t("p",{class:"py-4 text-md text-white text-center"}," You should add once only.",-1),_a={class:"flex justify-center"},ba=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_shop1.close()"},"No",-1),xa=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),wa=t("button",{class:"btn btn-success btn-sm",onclick:"my_modal_shop2.showModal()"},"1.2 pt.2",-1),$a={id:"my_modal_shop2",class:"modal"},ka={class:"modal-box bg-slate-700"},Ia=t("p",{class:"py-4 text-lg text-white text-center"},[H("Add materials from "),t("span",{class:"text-error"},"1.2 part 2"),H(" event shop?")],-1),Aa=t("p",{class:"py-4 text-md text-white text-center"}," You should add once only.",-1),Ca={class:"flex justify-center"},Sa=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_shop2.close()"},"No",-1),Ma=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),Na=t("button",{class:"btn btn-error btn-sm",onclick:"my_modal_resetMat.showModal()"},"Reset",-1),Oa=t("p",{class:"py-4 text-lg text-white text-center"},[H("Reset quantity of "),t("span",{class:"text-error"},"selected"),H(" categories?")],-1),Ra=t("p",{class:"py-4 text-md text-white text-center"}," Click the buttons at the top to select.",-1),Da=t("button",{class:"btn btn-error btn-md",onclick:"my_modal_resetMat.close()"},"No",-1),Va=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1),La={__name:"PlannerWarehouse",emits:{closeOverlay:{type:Function,required:!0}},setup(e,{emit:a}){const n=a,l=S({"Base Item":!0,"Build Material":!0,"Insight Material":!0,"Resonate Material":!0});Ce(()=>{let _=_e().settings.unreleasedDrops;F().data.length===0?(console.log("Setting up warehouse"),E().items.data.forEach(s=>{(s.IsReleased||_)&&(s.Category==="Build Material"||s.Category==="Insight Material"||s.Category==="Resonate Material"&&s.Rarity<6||s.Name==="Dust"||s.Name==="Sharpodonty"||s.Name==="Crystal Casket")&&F().addItem(s.Name,s.Category)})):E().items.data.forEach(s=>{!F().itemExists(s.Name)&&(s.Name==="Crystal Casket"||!s.IsReleased&&_)?F().addItem(s.Name,s.Category):!s.IsReleased&&!_&&F().removeItem(s.Name)}),De(F().data)});const c=(_,s)=>{F().updateItem(_,Number(s))},r=_=>{l.value[_]=!l.value[_]},h=D(()=>Object.values(l.value).some(s=>s)?F().data.filter(s=>l.value[s.Category]):F().data),u=()=>{Object.values(l.value).every(_=>_)?(F().resetAll(),window.location.reload()):Object.keys(l.value).forEach(_=>{l.value[_]&&F().resetCategory(_)}),n("closeOverlay")},d=_=>{qn(_),n("closeOverlay")},m=()=>{n("closeOverlay")};return(_,s)=>(w(),C("div",Tn,[t("div",zn,[t("button",{onClick:m,class:"absolute top-2 right-4 text-white"},Kn),Yn,t("div",null,[t("div",Zn,[t("div",Jn,[t("label",Xn,[ea,t("input",{type:"checkbox",checked:"",onChange:s[0]||(s[0]=f=>r("Base Item")),class:"checkbox checkbox-error"},null,32)])]),t("div",ta,[t("label",sa,[na,t("input",{type:"checkbox",checked:"",onChange:s[1]||(s[1]=f=>r("Build Material")),class:"checkbox checkbox-info"},null,32)])]),t("div",aa,[t("label",la,[oa,t("input",{type:"checkbox",checked:"",onChange:s[2]||(s[2]=f=>r("Insight Material")),class:"checkbox checkbox-success"},null,32)])]),t("div",ia,[t("label",ra,[ca,t("input",{type:"checkbox",checked:"",onChange:s[3]||(s[3]=f=>r("Resonate Material")),class:"checkbox checkbox-warning"},null,32)])])])]),t("div",ua,[t("div",da,[(w(!0),C(T,null,se(h.value,f=>(w(),B(Gn,{class:"",key:f.Material,material:f,"onUpdate:quantity":g=>c(f.Material,g)},null,8,["material","onUpdate:quantity"]))),128))])]),t("div",ha,[t("div",fa,[va,t("dialog",pa,[t("div",ma,[ga,ya,t("div",_a,[t("button",{class:"btn btn-success btn-md mr-2",onClick:s[4]||(s[4]=f=>d("1.21"))},"Yes"),ba])]),xa]),wa,t("dialog",$a,[t("div",ka,[Ia,Aa,t("div",Ca,[t("button",{class:"btn btn-success btn-md mr-2",onClick:s[5]||(s[5]=f=>d("1.22"))},"Yes"),Sa])]),Ma])]),Na,t("dialog",{id:"my_modal_resetMat",class:"modal"},[t("div",{class:"modal-box bg-slate-700"},[Oa,Ra,t("div",{class:"flex justify-center"},[t("button",{class:"btn btn-success btn-md mr-2",onClick:u},"Yes"),Da])]),Va])])])]))}},ja={class:"list-overlay"},Pa={class:"custom-modal-small h-auto space-y-5"},Ea=t("i",{class:"fas fa-times"},null,-1),Ua=[Ea],qa={class:"form-control"},Wa={class:"cursor-pointer label justify-center space-x-5"},Fa=t("span",{class:"label-text text-white text-md"},"Show unreleased",-1),Qa={class:"form-control"},Ba={class:"cursor-pointer label justify-center space-x-5"},Ga=t("span",{class:"label-text text-white text-md"},"Use 1.4 Stage Data (Experimental)",-1),Ta={__name:"PlannerSettings",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveSettings:{type:Function,required:!0}},setup(e,{emit:a}){const n=e,l=a,c=S(n.settings.showUnreleased),r=S(n.settings.unreleasedDrops),h=()=>{l("closeOverlay")},u=()=>{const d={showUnreleased:c.value,unreleasedDrops:r.value};l("saveSettings",d),h()};return(d,m)=>(w(),C("div",ja,[t("div",Pa,[t("button",{onClick:h,class:"absolute top-2 right-4 text-white"},Ua),t("div",qa,[t("label",Wa,[Fa,ne(t("input",{"onUpdate:modelValue":m[0]||(m[0]=_=>c.value=_),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[ve,c.value]])])]),t("div",Qa,[t("label",Ba,[Ga,ne(t("input",{"onUpdate:modelValue":m[1]||(m[1]=_=>r.value=_),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[ve,r.value]])])]),t("div",{class:"flex justify-center"},[t("button",{onClick:u,class:"btn btn-success"},"Save")])])]))}},za={class:"responsive-spacer"},Ha=t("h2",{class:"text-2xl text-white font-bold mb-4 lg:mb-6"},"Planner",-1),Ka=t("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1),Ya=t("i",{class:"fa-solid fa-tree"},null,-1),Za=[Ya],Ja=t("i",{class:"fa-solid fa-box-archive"},null,-1),Xa=[Ja],el=t("i",{class:"fa-solid fa-gear"},null,-1),tl=[el],sl=t("div",{class:"custom-line"},null,-1),nl=t("div",{class:"custom-line"},null,-1),al={key:0,class:"overlay"},ll={key:1,class:"overlay"},ol={key:2,class:"overlay"},il={key:3,class:"overlay"},rl={key:4,class:"overlay"},dl=ze({__name:"PlannerView",setup(e){const a=He(),n=Ke(),l=E().arcanists.data||[],c=_e(),r=S([]),h=D(()=>a.selectedArcanists.map(N=>N.Id));Me(()=>{r.value=l.filter(N=>!h.value.includes(N.Id)&&(c.settings.showUnreleased?!0:N.IsReleased)),r.value.sort((N,Z)=>{const ae=Z.Rarity-N.Rarity;return ae!==0?ae:N.Name.localeCompare(Z.Name)})});const u=S(null),d=S([]),m=S(!1),_=S(!1),s=S(!1),f=S(!1),g=S(!1),y=S(null),$=S(null),x=S(null),o=S(null),v=S(null),p=()=>{m.value=!0},i=()=>{m.value=!1},k=()=>{_.value=!0},b=N=>{u.value=N,k()},I=()=>{_.value=!1},O=()=>{s.value=!0},L=()=>{s.value=!1},W=()=>{f.value=!0},Q=()=>{f.value=!1},z=()=>{g.value=!0},K=()=>{g.value=!1},ee=N=>{u.value={Id:N.Id,isVisible:!0,currentInsight:0,currentLevel:1,currentResonance:0,goalInsight:0,goalLevel:1,goalResonance:0},k()},Y=N=>{a.selectedArcanists=N,I()},M=N=>{r.value=N},A=N=>{d.value=N},R=N=>{n.settings=N},J=N=>{c.settings=N};return le(y,i),le($,I),le(x,L),le(o,Q),le(v,K),(N,Z)=>(w(),C("div",za,[Ha,j(vs,{selectedArcanists:P(a).selectedArcanists,onOpenEditOverlay:b},null,8,["selectedArcanists"]),t("div",{class:"flex justify-between items-center mb-2 mt-2"},[t("button",{onClick:p,class:"btn btn-ghost btn-sm custom-gradient-button"},[Ka,H(" Add Arcanist")]),t("div",{class:"flex space-x-2"},[t("div",{class:"tooltip","data-tip":"Wilderness Settings"},[t("button",{onClick:O,class:"btn btn-ghost btn-sm custom-gradient-button"},Za)]),t("div",{class:"tooltip","data-tip":"Manage Warehouse"},[t("button",{onClick:W,class:"btn btn-ghost btn-sm custom-gradient-button"},Xa)]),t("div",{class:"tooltip","data-tip":"Settings"},[t("button",{onClick:z,class:"btn btn-ghost btn-sm custom-gradient-button"},tl)])])]),sl,j(mn,{totalActivityAndDays:d.value,wildernessSettings:P(n).settings},null,8,["totalActivityAndDays","wildernessSettings"]),nl,m.value?(w(),C("div",al,[j(rt,{ref_key:"arcanistListRef",ref:y,arcanists:r.value,onCloseOverlay:i,onSelectArcanist:ee},null,8,["arcanists"])])):X("",!0),_.value?(w(),C("div",ll,[u.value?(w(),B(ls,{key:0,ref_key:"plannerEditRef",ref:$,selectedArcanist:u.value,selectedArcanists:P(a).selectedArcanists,listArcanists:r.value,onCloseOverlay:I,onUpdateSelectedArcanists:Y,onUpdateListArcanists:M},null,8,["selectedArcanist","selectedArcanists","listArcanists"])):X("",!0)])):X("",!0),s.value?(w(),C("div",ol,[j(Un,{ref_key:"wildernessRef",ref:x,settings:P(n).settings,onCloseOverlay:L,onSaveWildernessSettings:R},null,8,["settings"])])):X("",!0),f.value?(w(),C("div",il,[j(La,{ref_key:"warehouseRef",ref:o,onCloseOverlay:Q},null,512)])):X("",!0),g.value?(w(),C("div",rl,[j(Ta,{ref_key:"settingsRef",ref:v,settings:P(c).settings,onCloseOverlay:K,onSaveSettings:J},null,8,["settings"])])):X("",!0),j(Js,{selectedArcanists:P(a).selectedArcanists,"onUpdate:totalActivityAndDays":A},null,8,["selectedArcanists"])]))}});export{dl as default};
