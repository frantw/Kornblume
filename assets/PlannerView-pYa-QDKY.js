import{o as ct}from"./index-FA1CLnTY.js";import{x as vt,u as Qt,g as k,j as R,o as x,c as M,a as e,m as J,y as $t,z as dt,p as E,F as T,r as tt,e as N,t as S,i as F,f as Y,A as B,l as Ht,d as it,h as W,B as gt,n as z,_ as lt,C as de,D as xt,k as Ot,b as jt,w as K,E as he,v as Ct,q as wt,s as Mt}from"./index-Zdkj8tAG.js";import{_ as Kt,c as pe,a as ye}from"./ArcanistIcon.vue_vue_type_script_setup_true_name_ArcanistIcon_lang-y0rgWgYE.js";const q=vt("global",{state:()=>({isEditingWarehouse:!1,isEditingMaterial:"",neededRawMaterialsMapping:{},neededMaterialsMapping:{}}),actions:{setIsEditingWarehouse(t){this.isEditingWarehouse=t},setIsEditingMaterial(t){this.isEditingMaterial=t||""},getNeededRawMaterialsQuantity(t){return this.neededRawMaterialsMapping[t]||0},updateNeededRawMaterialsMapping(t){this.neededRawMaterialsMapping={...t}},getNeededMaterialsQuantity(t){return this.neededMaterialsMapping[t]||0},updateNeededMaterialsMapping(t){this.neededMaterialsMapping={...t}}}}),Zt=vt("planner",{state:()=>({selectedArcanists:[]}),persist:!0}),bt=vt("activity",{state:()=>({settings:{roaringMonth:!1,lazyModo:!1,weeklyActivity:!1,refills:0,activity:240,cost:0}}),persist:!0}),Jt=vt("wilderness",{state:()=>({settings:{dust1:6,dust2:6,dust3:6,gold1:6,gold2:6,gold3:6,vigor:0,lazyModo:!1,wildernessOutput:{dust:19440,gold:8640}}}),persist:!0}),yt=vt("plannerSettings",{state:()=>({settings:{showUnreleasedArcanists:!1,enabledUnreleasedStages:!1,enableGreedyMethod:!0}}),persist:!0}),ve={class:"list-overlay"},me={class:"custom-modal-small h-5/6 lg:h-3/4"},fe={class:"relative"},ge=e("i",{class:"fas fa-times"},null,-1),be=[ge],_e={class:"form-control"},Se={class:"cursor-pointer label justify-center space-x-5"},De=e("span",{class:"label-text text-white text-md"},"Show Unreleased Arcanists",-1),$e={class:"p-2 overflow-y-auto h-5/6"},xe=["onClick"],we={class:"text-white ml-8"},Me={__name:"ArcanistList",props:{arcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},selectArcanist:{type:Function,required:!0}},setup(t,{emit:s}){const{locale:o,t:a}=Qt(),n=t,i=s,h=v=>{i("selectArcanist",v),d()},d=()=>{i("closeOverlay")},r=k(""),f=R(()=>o.value==="en-US"?n.arcanists.filter(v=>v.Name.toLowerCase().includes(r.value.toLowerCase())):n.arcanists.filter(v=>a(v.Name).includes(r.value)));return(v,l)=>(x(),M("div",ve,[e("div",me,[e("div",fe,[J(e("input",{"onUpdate:modelValue":l[0]||(l[0]=b=>r.value=b),type:"text",placeholder:"Search Arcanists",class:"bg-gray-800 text-white p-2 rounded-md w-11/12 focus:outline-none"},null,512),[[$t,r.value]]),e("button",{onClick:d,class:"absolute top-2 right-0 text-white"},be),e("div",_e,[e("label",Se,[De,J(e("input",{"onUpdate:modelValue":l[1]||(l[1]=b=>E(yt)().settings.showUnreleasedArcanists=b),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[dt,E(yt)().settings.showUnreleasedArcanists]])])])]),e("div",$e,[(x(!0),M(T,null,tt(f.value,b=>(x(),M("div",{key:b.Id,onClick:p=>h(b),class:"p-4 flex items-center cursor-pointer hover:bg-gray-700 transition-colors"},[N(Kt,{arcanist:b},null,8,["arcanist"]),e("span",we,S(v.$t(b.Name)),1)],8,xe))),128))])])]))}};function Ie(t){return`images/items/common/${t==="Oneiric Shop"?1:0}.png`}const Xt=F().items,ke=t=>{const s=Xt.find(o=>o.Name===t);return s?s.Id:null},Ae=t=>{const s=Xt.find(o=>o.Name===t);return s?s.Rarity:null},Ce=t=>{const s=ke(t);return s?`images/items/icon/${s}.png`:""},Re=t=>{const s=Ae(t);return s?`images/items/border/${s}.png`:""};function ft(t){return t>=1e6?`${(t/1e6).toFixed(1)}m`:t>=1e4?`${(t/1e3).toFixed(0)}k`:t.toString()}function _t(t){return{material:t.Material,quantity:ft(t.Quantity),itemImagePath:Ce(t.Material),borderImagePath:Re(t.Material)}}const Ne=["data-tip"],Qe={class:"relative inline-block"},Oe=["src"],je=["src"],Ve={class:"absolute text-white bottom-4 right-3 bg-gray-700 rounded-tl px-1 py-px text-xs"},Ee=Y({__name:"ItemIcon",props:{material:{type:Object,required:!0}},setup(t){const s=t,o=R(()=>_t(s.material));return(a,n)=>(x(),M("div",{class:"tooltip","data-tip":a.$t(o.value.material)},[e("div",Qe,[e("img",{src:o.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,Oe),e("img",{src:o.value.itemImagePath,alt:"Material Image",class:"w-20 h-20"},null,8,je),e("div",Ve,S(o.value.quantity),1)])],8,Ne))}}),Le={class:"hidden-scrollbar pt-9 flex flex-wrap justify-center overflow-y-scroll overflow-x-hidden"},Pe={__name:"ItemList",props:{materialList:{type:Array,required:!0}},setup(t){const s=t;return(o,a)=>(x(),M("div",Le,[(x(!0),M(T,null,tt(s.materialList,n=>(x(),B(Ee,{key:n,material:n},null,8,["material"]))),128))]))}},Yt=[{Rarity:[5,6],Insight:0,Levels:{2:{Dust:100,Sharpodonty:100},3:{Dust:150,Sharpodonty:130},4:{Dust:200,Sharpodonty:160},5:{Dust:250,Sharpodonty:190},6:{Dust:350,Sharpodonty:220},7:{Dust:400,Sharpodonty:250},8:{Dust:450,Sharpodonty:280},9:{Dust:500,Sharpodonty:310},10:{Dust:550,Sharpodonty:340},11:{Dust:600,Sharpodonty:370},12:{Dust:650,Sharpodonty:400},13:{Dust:700,Sharpodonty:430},14:{Dust:750,Sharpodonty:460},15:{Dust:800,Sharpodonty:490},16:{Dust:850,Sharpodonty:520},17:{Dust:900,Sharpodonty:550},18:{Dust:950,Sharpodonty:580},19:{Dust:1e3,Sharpodonty:610},20:{Dust:1050,Sharpodonty:640},21:{Dust:1200,Sharpodonty:670},22:{Dust:1300,Sharpodonty:700},23:{Dust:1400,Sharpodonty:730},24:{Dust:1500,Sharpodonty:760},25:{Dust:1600,Sharpodonty:790},26:{Dust:1700,Sharpodonty:820},27:{Dust:1800,Sharpodonty:850},28:{Dust:1900,Sharpodonty:880},29:{Dust:2e3,Sharpodonty:910},30:{Dust:2100,Sharpodonty:940}},Total:{Dust:27700,Sharpodonty:15080}},{Rarity:[5,6],Insight:1,Levels:{2:{Dust:400,Sharpodonty:200},3:{Dust:500,Sharpodonty:250},4:{Dust:600,Sharpodonty:300},5:{Dust:700,Sharpodonty:350},6:{Dust:900,Sharpodonty:400},7:{Dust:1e3,Sharpodonty:450},8:{Dust:1100,Sharpodonty:500},9:{Dust:1200,Sharpodonty:550},10:{Dust:1300,Sharpodonty:600},11:{Dust:1500,Sharpodonty:650},12:{Dust:1600,Sharpodonty:700},13:{Dust:1700,Sharpodonty:750},14:{Dust:1800,Sharpodonty:800},15:{Dust:1900,Sharpodonty:850},16:{Dust:2100,Sharpodonty:900},17:{Dust:2200,Sharpodonty:950},18:{Dust:2300,Sharpodonty:1e3},19:{Dust:2400,Sharpodonty:1050},20:{Dust:2500,Sharpodonty:1100},21:{Dust:2600,Sharpodonty:1150},22:{Dust:2700,Sharpodonty:1200},23:{Dust:2800,Sharpodonty:1250},24:{Dust:2900,Sharpodonty:1300},25:{Dust:3e3,Sharpodonty:1350},26:{Dust:3100,Sharpodonty:1400},27:{Dust:3200,Sharpodonty:1450},28:{Dust:3300,Sharpodonty:1500},29:{Dust:3400,Sharpodonty:1550},30:{Dust:3500,Sharpodonty:1600},31:{Dust:3700,Sharpodonty:1800},32:{Dust:3800,Sharpodonty:2e3},33:{Dust:3900,Sharpodonty:2200},34:{Dust:4e3,Sharpodonty:2400},35:{Dust:4100,Sharpodonty:2600},36:{Dust:4300,Sharpodonty:2800},37:{Dust:4400,Sharpodonty:3e3},38:{Dust:4500,Sharpodonty:3200},39:{Dust:4600,Sharpodonty:3400},40:{Dust:4700,Sharpodonty:3600}},Total:{Dust:100200,Sharpodonty:53100}},{Rarity:[5,6],Insight:2,Levels:{2:{Dust:1100,Sharpodonty:400},3:{Dust:1400,Sharpodonty:500},4:{Dust:1700,Sharpodonty:600},5:{Dust:2e3,Sharpodonty:700},6:{Dust:2300,Sharpodonty:800},7:{Dust:2600,Sharpodonty:900},8:{Dust:2900,Sharpodonty:1e3},9:{Dust:3200,Sharpodonty:1100},10:{Dust:3500,Sharpodonty:1200},11:{Dust:3800,Sharpodonty:1300},12:{Dust:4100,Sharpodonty:1400},13:{Dust:4400,Sharpodonty:1500},14:{Dust:4700,Sharpodonty:1600},15:{Dust:5e3,Sharpodonty:1700},16:{Dust:5300,Sharpodonty:1800},17:{Dust:5600,Sharpodonty:1900},18:{Dust:5900,Sharpodonty:2e3},19:{Dust:6200,Sharpodonty:2100},20:{Dust:6500,Sharpodonty:2200},21:{Dust:6800,Sharpodonty:2300},22:{Dust:7100,Sharpodonty:2400},23:{Dust:7400,Sharpodonty:2500},24:{Dust:7700,Sharpodonty:2600},25:{Dust:8e3,Sharpodonty:2700},26:{Dust:8300,Sharpodonty:2800},27:{Dust:8600,Sharpodonty:2900},28:{Dust:8900,Sharpodonty:3e3},29:{Dust:9200,Sharpodonty:3100},30:{Dust:9500,Sharpodonty:3200},31:{Dust:9800,Sharpodonty:3300},32:{Dust:10100,Sharpodonty:3400},33:{Dust:10400,Sharpodonty:3500},34:{Dust:10700,Sharpodonty:3600},35:{Dust:11e3,Sharpodonty:3700},36:{Dust:11300,Sharpodonty:3800},37:{Dust:11600,Sharpodonty:3900},38:{Dust:11900,Sharpodonty:4e3},39:{Dust:12200,Sharpodonty:4100},40:{Dust:12500,Sharpodonty:4200},41:{Dust:12800,Sharpodonty:4300},42:{Dust:13100,Sharpodonty:4400},43:{Dust:13400,Sharpodonty:4500},44:{Dust:13700,Sharpodonty:4600},45:{Dust:14e3,Sharpodonty:4700},46:{Dust:14300,Sharpodonty:4800},47:{Dust:14600,Sharpodonty:4900},48:{Dust:14900,Sharpodonty:5e3},49:{Dust:15200,Sharpodonty:5100},50:{Dust:15500,Sharpodonty:5200}},Total:{Dust:406700,Sharpodonty:137200}},{Rarity:[5,6],Insight:3,Levels:{2:{Dust:5640,Sharpodonty:2500},3:{Dust:5760,Sharpodonty:2600},4:{Dust:5880,Sharpodonty:2700},5:{Dust:6e3,Sharpodonty:2800},6:{Dust:6240,Sharpodonty:2900},7:{Dust:6380,Sharpodonty:3e3},8:{Dust:6520,Sharpodonty:3100},9:{Dust:6660,Sharpodonty:3200},10:{Dust:6800,Sharpodonty:3300},11:{Dust:7160,Sharpodonty:3400},12:{Dust:7320,Sharpodonty:3500},13:{Dust:7480,Sharpodonty:3600},14:{Dust:7640,Sharpodonty:3700},15:{Dust:7800,Sharpodonty:3800},16:{Dust:8280,Sharpodonty:3900},17:{Dust:8460,Sharpodonty:4e3},18:{Dust:8640,Sharpodonty:4100},19:{Dust:8820,Sharpodonty:4200},20:{Dust:9e3,Sharpodonty:4300},21:{Dust:9600,Sharpodonty:4500},22:{Dust:9800,Sharpodonty:4700},23:{Dust:1e4,Sharpodonty:4900},24:{Dust:10200,Sharpodonty:5100},25:{Dust:10400,Sharpodonty:5300},26:{Dust:11100,Sharpodonty:5500},27:{Dust:11300,Sharpodonty:5700},28:{Dust:11600,Sharpodonty:5900},29:{Dust:11800,Sharpodonty:6100},30:{Dust:12e3,Sharpodonty:6300},31:{Dust:12800,Sharpodonty:6500},32:{Dust:13100,Sharpodonty:6700},33:{Dust:13300,Sharpodonty:6900},34:{Dust:13600,Sharpodonty:7100},35:{Dust:13800,Sharpodonty:7300},36:{Dust:14800,Sharpodonty:7500},37:{Dust:15e3,Sharpodonty:7700},38:{Dust:15300,Sharpodonty:7900},39:{Dust:15500,Sharpodonty:8100},40:{Dust:15800,Sharpodonty:8300},41:{Dust:16900,Sharpodonty:8500},42:{Dust:17200,Sharpodonty:8700},43:{Dust:17400,Sharpodonty:8900},44:{Dust:17700,Sharpodonty:9100},45:{Dust:18e3,Sharpodonty:9300},46:{Dust:19200,Sharpodonty:9500},47:{Dust:19500,Sharpodonty:9700},48:{Dust:19800,Sharpodonty:9900},49:{Dust:20100,Sharpodonty:10100},50:{Dust:20400,Sharpodonty:10300},51:{Dust:21700,Sharpodonty:10500},52:{Dust:22e3,Sharpodonty:10700},53:{Dust:22400,Sharpodonty:10900},54:{Dust:22700,Sharpodonty:11100},55:{Dust:23e3,Sharpodonty:11300},56:{Dust:24400,Sharpodonty:11500},57:{Dust:24800,Sharpodonty:11700},58:{Dust:25100,Sharpodonty:11900},59:{Dust:25500,Sharpodonty:12100},60:{Dust:25800,Sharpodonty:12300}},Total:{Dust:810880,Sharpodonty:400600}},{Rarity:[4],Insight:0,Levels:{2:{Dust:70,Sharpodonty:70},3:{Dust:110,Sharpodonty:90},4:{Dust:150,Sharpodonty:120},5:{Dust:180,Sharpodonty:140},6:{Dust:260,Sharpodonty:160},7:{Dust:300,Sharpodonty:180},8:{Dust:330,Sharpodonty:210},9:{Dust:370,Sharpodonty:230},10:{Dust:410,Sharpodonty:250},11:{Dust:450,Sharpodonty:270},12:{Dust:480,Sharpodonty:300},13:{Dust:520,Sharpodonty:320},14:{Dust:560,Sharpodonty:340},15:{Dust:600,Sharpodonty:360},16:{Dust:630,Sharpodonty:390},17:{Dust:670,Sharpodonty:410},18:{Dust:710,Sharpodonty:430},19:{Dust:750,Sharpodonty:450},20:{Dust:780,Sharpodonty:480},21:{Dust:900,Sharpodonty:500},22:{Dust:970,Sharpodonty:520},23:{Dust:1050,Sharpodonty:540},24:{Dust:1120,Sharpodonty:570},25:{Dust:1200,Sharpodonty:590},26:{Dust:1270,Sharpodonty:610},27:{Dust:1350,Sharpodonty:630},28:{Dust:1420,Sharpodonty:660},29:{Dust:1500,Sharpodonty:680},30:{Dust:1570,Sharpodonty:700}},Total:{Dust:20680,Sharpodonty:11200}},{Rarity:[4],Insight:1,Levels:{2:{Dust:300,Sharpodonty:150},3:{Dust:370,Sharpodonty:180},4:{Dust:450,Sharpodonty:220},5:{Dust:520,Sharpodonty:260},6:{Dust:670,Sharpodonty:300},7:{Dust:750,Sharpodonty:330},8:{Dust:820,Sharpodonty:370},9:{Dust:900,Sharpodonty:410},10:{Dust:970,Sharpodonty:450},11:{Dust:1120,Sharpodonty:480},12:{Dust:1200,Sharpodonty:520},13:{Dust:1270,Sharpodonty:560},14:{Dust:1350,Sharpodonty:600},15:{Dust:1420,Sharpodonty:630},16:{Dust:1570,Sharpodonty:670},17:{Dust:1650,Sharpodonty:710},18:{Dust:1720,Sharpodonty:750},19:{Dust:1800,Sharpodonty:780},20:{Dust:1870,Sharpodonty:820},21:{Dust:1950,Sharpodonty:860},22:{Dust:2020,Sharpodonty:900},23:{Dust:2100,Sharpodonty:930},24:{Dust:2170,Sharpodonty:970},25:{Dust:2250,Sharpodonty:1010},26:{Dust:2320,Sharpodonty:1050},27:{Dust:2400,Sharpodonty:1080},28:{Dust:2470,Sharpodonty:1120},29:{Dust:2550,Sharpodonty:1160},30:{Dust:2620,Sharpodonty:1200},31:{Dust:2770,Sharpodonty:1350},32:{Dust:2850,Sharpodonty:1500},33:{Dust:2920,Sharpodonty:1650},34:{Dust:3e3,Sharpodonty:1800},35:{Dust:3070,Sharpodonty:1950},36:{Dust:3220,Sharpodonty:2100},37:{Dust:3300,Sharpodonty:2250},38:{Dust:3370,Sharpodonty:2400},39:{Dust:3450,Sharpodonty:2550},40:{Dust:3520,Sharpodonty:2700}},Total:{Dust:75040,Sharpodonty:39720}},{Rarity:[4],Insight:2,Levels:{2:{Dust:820,Sharpodonty:300},3:{Dust:1050,Sharpodonty:370},4:{Dust:1270,Sharpodonty:450},5:{Dust:1500,Sharpodonty:520},6:{Dust:1720,Sharpodonty:600},7:{Dust:1950,Sharpodonty:670},8:{Dust:2170,Sharpodonty:750},9:{Dust:2400,Sharpodonty:820},10:{Dust:2620,Sharpodonty:900},11:{Dust:2850,Sharpodonty:970},12:{Dust:3070,Sharpodonty:1050},13:{Dust:3300,Sharpodonty:1120},14:{Dust:3520,Sharpodonty:1200},15:{Dust:3750,Sharpodonty:1270},16:{Dust:3970,Sharpodonty:1350},17:{Dust:4200,Sharpodonty:1420},18:{Dust:4420,Sharpodonty:1500},19:{Dust:4650,Sharpodonty:1570},20:{Dust:4870,Sharpodonty:1650},21:{Dust:5100,Sharpodonty:1720},22:{Dust:5320,Sharpodonty:1800},23:{Dust:5550,Sharpodonty:1870},24:{Dust:5770,Sharpodonty:1950},25:{Dust:6e3,Sharpodonty:2020},26:{Dust:6220,Sharpodonty:2100},27:{Dust:6450,Sharpodonty:2170},28:{Dust:6670,Sharpodonty:2250},29:{Dust:6900,Sharpodonty:2320},30:{Dust:7120,Sharpodonty:2400},31:{Dust:7350,Sharpodonty:2470},32:{Dust:7570,Sharpodonty:2550},33:{Dust:7800,Sharpodonty:2620},34:{Dust:8020,Sharpodonty:2700},35:{Dust:8250,Sharpodonty:2770},36:{Dust:8470,Sharpodonty:2850},37:{Dust:8700,Sharpodonty:2920},38:{Dust:8920,Sharpodonty:3e3},39:{Dust:9150,Sharpodonty:3070},40:{Dust:9370,Sharpodonty:3150},41:{Dust:9600,Sharpodonty:3230},42:{Dust:9820,Sharpodonty:3300},43:{Dust:10050,Sharpodonty:3370},44:{Dust:10270,Sharpodonty:3450},45:{Dust:10500,Sharpodonty:3520},46:{Dust:10720,Sharpodonty:3600},47:{Dust:10950,Sharpodonty:3670},48:{Dust:11170,Sharpodonty:3750},49:{Dust:11400,Sharpodonty:3820},50:{Dust:11620,Sharpodonty:3900}},Total:{Dust:304900,Sharpodonty:102790}},{Rarity:[2,3],Insight:0,Levels:{2:{Dust:60,Sharpodonty:60},3:{Dust:90,Sharpodonty:70},4:{Dust:120,Sharpodonty:90},5:{Dust:150,Sharpodonty:110},6:{Dust:210,Sharpodonty:130},7:{Dust:240,Sharpodonty:150},8:{Dust:270,Sharpodonty:160},9:{Dust:300,Sharpodonty:180},10:{Dust:330,Sharpodonty:200},11:{Dust:360,Sharpodonty:220},12:{Dust:390,Sharpodonty:240},13:{Dust:420,Sharpodonty:250},14:{Dust:450,Sharpodonty:270},15:{Dust:480,Sharpodonty:290},16:{Dust:510,Sharpodonty:310},17:{Dust:540,Sharpodonty:330},18:{Dust:570,Sharpodonty:340},19:{Dust:600,Sharpodonty:350},20:{Dust:630,Sharpodonty:360},21:{Dust:720,Sharpodonty:400},22:{Dust:780,Sharpodonty:420},23:{Dust:840,Sharpodonty:430},24:{Dust:900,Sharpodonty:450},25:{Dust:960,Sharpodonty:470},26:{Dust:1020,Sharpodonty:490},27:{Dust:1080,Sharpodonty:510},28:{Dust:1140,Sharpodonty:520},29:{Dust:1200,Sharpodonty:540},30:{Dust:1260,Sharpodonty:560}},Total:{Dust:16620,Sharpodonty:8900}},{Rarity:[2,3],Insight:1,Levels:{2:{Dust:240,Sharpodonty:120},3:{Dust:300,Sharpodonty:150},4:{Dust:360,Sharpodonty:180},5:{Dust:420,Sharpodonty:210},6:{Dust:540,Sharpodonty:240},7:{Dust:600,Sharpodonty:270},8:{Dust:660,Sharpodonty:300},9:{Dust:720,Sharpodonty:330},10:{Dust:780,Sharpodonty:360},11:{Dust:900,Sharpodonty:390},12:{Dust:960,Sharpodonty:420},13:{Dust:1020,Sharpodonty:450},14:{Dust:1080,Sharpodonty:480},15:{Dust:1140,Sharpodonty:510},16:{Dust:1260,Sharpodonty:540},17:{Dust:1320,Sharpodonty:570},18:{Dust:1380,Sharpodonty:600},19:{Dust:1440,Sharpodonty:630},20:{Dust:1500,Sharpodonty:660},21:{Dust:1560,Sharpodonty:690},22:{Dust:1620,Sharpodonty:720},23:{Dust:1680,Sharpodonty:750},24:{Dust:1740,Sharpodonty:780},25:{Dust:1800,Sharpodonty:810},26:{Dust:1860,Sharpodonty:840},27:{Dust:1920,Sharpodonty:870},28:{Dust:1980,Sharpodonty:900},29:{Dust:2040,Sharpodonty:930},30:{Dust:2100,Sharpodonty:960},31:{Dust:2220,Sharpodonty:1080},32:{Dust:2280,Sharpodonty:1200},33:{Dust:2340,Sharpodonty:1320},34:{Dust:2400,Sharpodonty:1440},35:{Dust:2460,Sharpodonty:1560},36:{Dust:2520,Sharpodonty:1680},37:{Dust:2580,Sharpodonty:1800},38:{Dust:2700,Sharpodonty:1920},39:{Dust:2760,Sharpodonty:2040},40:{Dust:2820,Sharpodonty:2160}},Total:{Dust:6e4,Sharpodonty:31860}},{Rarity:[2,3],Insight:2,Levels:{2:{Dust:660,Sharpodonty:240},3:{Dust:840,Sharpodonty:300},4:{Dust:1020,Sharpodonty:360},5:{Dust:1200,Sharpodonty:420},6:{Dust:1380,Sharpodonty:480},7:{Dust:1560,Sharpodonty:540},8:{Dust:1740,Sharpodonty:600},9:{Dust:1920,Sharpodonty:660},10:{Dust:2100,Sharpodonty:720},11:{Dust:2280,Sharpodonty:780},12:{Dust:2460,Sharpodonty:840},13:{Dust:2640,Sharpodonty:900},14:{Dust:2820,Sharpodonty:960},15:{Dust:3e3,Sharpodonty:1020},16:{Dust:3180,Sharpodonty:1080},17:{Dust:3360,Sharpodonty:1140},18:{Dust:3540,Sharpodonty:1200},19:{Dust:3720,Sharpodonty:1260},20:{Dust:3900,Sharpodonty:1320},21:{Dust:4080,Sharpodonty:1380},22:{Dust:4260,Sharpodonty:1440},23:{Dust:4440,Sharpodonty:1500},24:{Dust:4620,Sharpodonty:1560},25:{Dust:4800,Sharpodonty:1620},26:{Dust:4980,Sharpodonty:1680},27:{Dust:5160,Sharpodonty:1740},28:{Dust:5340,Sharpodonty:1800},29:{Dust:5520,Sharpodonty:1860},30:{Dust:5700,Sharpodonty:1920},31:{Dust:5880,Sharpodonty:1980},32:{Dust:6060,Sharpodonty:2040},33:{Dust:6240,Sharpodonty:2100},34:{Dust:6420,Sharpodonty:2160},35:{Dust:6600,Sharpodonty:2220},36:{Dust:6780,Sharpodonty:2280},37:{Dust:6960,Sharpodonty:2340},38:{Dust:7140,Sharpodonty:2400},39:{Dust:7320,Sharpodonty:2460},40:{Dust:7500,Sharpodonty:2520},41:{Dust:7680,Sharpodonty:2580},42:{Dust:7860,Sharpodonty:2640},43:{Dust:8040,Sharpodonty:2700},44:{Dust:8220,Sharpodonty:2760},45:{Dust:8400,Sharpodonty:2820},46:{Dust:8580,Sharpodonty:2880},47:{Dust:8760,Sharpodonty:2940},48:{Dust:8940,Sharpodonty:3e3},49:{Dust:9120,Sharpodonty:3060},50:{Dust:9300,Sharpodonty:3120}},Total:{Dust:244020,Sharpodonty:82320}}],Ue=Yt,Dt=F().items,qe=F().arcanists,Ut={"Base Item":0,"Resonate Material":1,"Insight Material":2,"Build Material":2};function te(t){t.sort((s,o)=>{const a=Dt.findIndex(d=>d.Name===s.Material),n=Dt.findIndex(d=>d.Name===o.Material),i=Dt[a],h=Dt[n];if(i&&h){const d=Ut[i.Category],r=Ut[h.Category];return d!==r?d-r:h.Rarity!==i.Rarity?h.Rarity-i.Rarity:a-n}else return n-a})}function Vt(t){const s={};return t.forEach(a=>{a&&(Array.isArray(a)?a.flat().forEach(({Material:i,Quantity:h})=>{s[i]?s[i]+=h:s[i]=h}):typeof a=="object"&&Object.entries(a).forEach(([n,i])=>{s[n]?s[n]+=i:s[n]=i}))}),q().updateNeededRawMaterialsMapping(s),Object.keys(s).map(a=>({Material:a,Quantity:s[a]}))}function We(t){var a,n;te(t);const s=((a=t.find(i=>i.Material==="Dust"))==null?void 0:a.Quantity)||0,o=((n=t.find(i=>i.Material==="Sharpodonty"))==null?void 0:n.Quantity)||0;return s===0&&o===0?t.filter(h=>h.Material!=="Dust"&&h.Material!=="Sharpodonty"):t}function Fe(t){var r,f,v,l,b,p;const s=((r=t.find(y=>y.Material==="Dust"))==null?void 0:r.Quantity)||0,o=((f=t.find(y=>y.Material==="Sharpodonty"))==null?void 0:f.Quantity)||0;if(s===0&&o===0)return t.filter(_=>_.Material!=="Dust"&&_.Material!=="Sharpodonty");const a=((v=t.find(y=>y.Material==="Sinuous Howl"))==null?void 0:v.Quantity)||0,n=((l=t.find(y=>y.Material==="Interlaced Shudder"))==null?void 0:l.Quantity)||0,i=((b=t.find(y=>y.Material==="Hypocritical Murmur"))==null?void 0:b.Quantity)||0,h=((p=t.find(y=>y.Material==="Hoarse Echo"))==null?void 0:p.Quantity)||0;t.push({Material:"Crystal Casket",Quantity:a+n+i+h});const d=t.filter(y=>y.Material!=="Sinuous Howl"&&y.Material!=="Interlaced Shudder"&&y.Material!=="Hypocritical Murmur"&&y.Material!=="Hoarse Echo");return te(d),d}function Et(t){const s=qe.find(l=>l.Id===t.Id),o=l=>{const b={Dust:0,Sharpodonty:0};if(l.currentInsight===l.goalInsight){const{Dust:y,Sharpodonty:_}=i(l.currentLevel,l.goalLevel,l,l.currentInsight);return b.Dust+=y,b.Sharpodonty+=_,b}for(let y=l.currentInsight;y<=l.goalInsight;y++)if(y<l.goalInsight){const _=n(l,y);if(b.Dust+=_.Total.Dust,b.Sharpodonty+=_.Total.Sharpodonty,y===l.currentInsight){const{Dust:D,Sharpodonty:c}=i(1,l.currentLevel,l,y);b.Dust-=D,b.Sharpodonty-=c}}else{const{Dust:_,Sharpodonty:D}=i(1,l.goalLevel,l,y);b.Dust+=_,b.Sharpodonty+=D}return[{Material:"Dust",Quantity:b.Dust},{Material:"Sharpodonty",Quantity:b.Sharpodonty}]},a=(l,b,p)=>{const y={};if(l===b)return null;for(let D=Number(l+1);D<=b;D++){const c=p.find(g=>g.Id===D);c&&c.Material.forEach((g,m)=>{const u=c.Quantity[m];y[g]?y[g]+=u:y[g]=u})}return Object.keys(y).map(D=>({Material:D,Quantity:y[D]}))},n=(l,b)=>Ue.find(y=>y.Rarity.includes(s.Rarity)&&y.Insight===b),i=(l,b,p,y)=>{const _={Dust:0,Sharpodonty:0};for(let D=Number(++l);D<=Number(b);D++){const c=n(p,y),g=D.toString(),m=c.Levels[g];m&&(_.Dust+=m.Dust,_.Sharpodonty+=m.Sharpodonty)}return _},h=a(t.currentInsight,t.goalInsight,s.Insight),d=a(t.currentResonance,t.goalResonance,s.Resonance),r=o(t),f=Vt([h,d,r]);return We(f)}const Te={__name:"ArcanistCalculate",props:{arcanist:{type:Object,required:!0}},setup(t){const s=t,o=R(()=>{const a=s.arcanist;return Et(a)});return(a,n)=>(x(),M("div",null,[N(Pe,{class:"max-h-48",materialList:o.value},null,8,["materialList"])]))}},Be={class:"relative w-2/3 md:w-1/3 flex justify-center"},ze={key:0},Ge=e("i",{class:"fa-regular fa-circle text-white"},null,-1),He=[Ge],Ke={key:1},Ze=["src","alt"],Je=e("div",{class:"flex items-center justify-center"},[e("i",{class:"fa-solid fa-caret-up text-blue-500"})],-1),Xe={class:"grid grid-cols-4 gap-1 p-3 border border-blue-300 rounded-md shadow-lg options-box custom-gradient-gray-blue"},Ye=["onClick"],ts={class:"flex items-center justify-center font-semibold rounded-full w-8 h-8 leading-none flex-col bg-blue-500 text-white"},es={key:0},ss=e("i",{class:"fa-regular fa-circle text-white"},null,-1),os=[ss],as={key:1},ns=["src","alt"],X={__name:"SelectList",props:{label:{type:String,required:!0},options:{type:Array,required:!0},selected:{type:Number}},emits:["update:selected"],setup(t,{emit:s}){const o=t,a=s,n=k(!1),i=k(o.selected),h=k(null),d=()=>{n.value=!0},r=()=>{n.value=!1},f=l=>{i.value=l,a("update:selected",l,o.label),n.value=!1},v=l=>`images/items/common/insight${l}.png`;return ct(h,r),Ht(()=>{o.selected===void 0?(i.value=o.options[0],a("update:selected",o.options[0],o.label)):(i.value=o.selected,a("update:selected",o.selected,o.label))}),(l,b)=>(x(),M("div",Be,[e("button",{onClick:d,class:"btn btn-sm btn-ghost gradient-blue w-1/2 m-2"},[t.label==="Current Insight"||t.label==="Goal Insight"?(x(),M(T,{key:0},[i.value===0?(x(),M("div",ze,He)):(x(),M("div",Ke,[e("img",{class:"avatar w-6",src:v(i.value),alt:"Option "+i.value},null,8,Ze)]))],64)):(x(),M(T,{key:1},[it(S(i.value),1)],64))]),n.value?(x(),M("div",{key:0,ref_key:"containerRef",ref:h,class:"absolute mt-14 w-48 lg:w-64 z-50"},[Je,e("div",Xe,[(x(!0),M(T,null,tt(t.options,p=>(x(),M("button",{key:p,class:"m-1",onClick:y=>f(p)},[e("div",ts,[t.label==="Current Insight"||t.label==="Goal Insight"?(x(),M(T,{key:0},[p===0?(x(),M("div",es,os)):(x(),M("div",as,[e("img",{src:v(p),alt:"Option "+p},null,8,ns)]))],64)):(x(),M(T,{key:1},[it(S(p),1)],64))])],8,Ye))),128))])],512)):W("",!0)]))}},rs={class:"edit-overlay"},is={class:"fixed p-4 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 custom-gradient-gray-blue custom-border rounded-md w-11/12 sm:max-w-2xl lg:h-auto"},ls={class:"flex items-center p-2 mb-3 shadow-border-b"},us={class:"flex items-center justify-center mr-2 space-x-3"},cs={class:"text-1xl md:text-2xl text-white font-bold"},ds={class:"text-sm text-white",for:"raritySelect"},hs=["data-tip"],ps={class:"ml-auto flex items-center space-x-3"},ys=["data-tip"],vs=e("i",{class:"fas fa-times"},null,-1),ms=[vs],fs=e("div",{class:"custom-line"},null,-1),gs={class:"custom-label text-blue-100"},bs={class:"mt-2 flex justify-center items-center leading-none"},_s=e("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),Ss={class:"custom-label text-blue-100"},Ds={class:"mt-2 flex justify-center items-center leading-none"},$s=e("i",{class:"text-white text-center flex items-center justify-center font-extrabold text-2xl -translate-y-2"},"_",-1),xs={class:"custom-label text-blue-100"},ws={class:"mt-2 flex justify-center items-center leading-none"},Ms=e("i",{class:"text-white fa-solid fa-angles-right text-center"},null,-1),Is={class:"flex justify-center space-x-4"},ks={key:0,class:"toast toast-middle toast-center"},As={class:"-translate-x-3 alert alert-info bg-red-300"},Cs={__name:"PlannerEdit",props:{selectedArcanist:{type:Object,required:!0},selectedArcanists:{type:Array,required:!0},listArcanists:{type:Array,required:!0}},emits:{closeOverlay:{type:Function,required:!0},updateSelectedArcanists:{type:Function,required:!0},updateListArcanists:{type:Function,required:!0}},setup(t,{emit:s}){const o=t,a=s,n=F().arcanists,i=k(!1),h=k(0),d=Yt,r=k(n.find(A=>Number(A.Id)===Number(o.selectedArcanist.Id))),f=k(o.selectedArcanists),v=k(o.listArcanists),l=k(o.selectedArcanist.currentInsight),b=k(o.selectedArcanist.currentLevel),p=k(o.selectedArcanist.currentResonance),y=k(o.selectedArcanist.goalInsight),_=k(o.selectedArcanist.goalLevel),D=k(o.selectedArcanist.goalResonance),c=k(o.selectedArcanist.isVisible),g=R(()=>({Id:r.value.Id,isVisible:c.value,currentInsight:l.value,currentLevel:b.value,goalInsight:y.value,goalLevel:_.value,currentResonance:p.value,goalResonance:D.value})),m=R(()=>r.value.Rarity),u=R(()=>[0,...r.value.Insight.map(A=>A.Id)]),w=R(()=>u.value.filter(A=>A>=l.value)),$=R(()=>{const A=d.find(C=>C.Rarity.includes(r.value.Rarity)&&C.Insight===l.value);return A?[1,...Object.keys(A.Levels).map(Number).filter(C=>C%5===0)]:[]}),I=R(()=>{if(y.value===null)return[];const A=d.find(C=>C.Rarity.includes(r.value.Rarity)&&C.Insight===y.value);return A?y.value===l.value?[1,...Object.keys(A.Levels).map(Number).filter(C=>C%5===0)].filter(C=>C>=b.value):[1,...Object.keys(A.Levels).map(Number).filter(C=>C%5===0)]:[]}),O=R(()=>{if(l.value===null)return[];if(l.value===0)return p.value=0,[0];const A=Number(l.value);if(A===0)return p.value=null,null;const C=A*5;return Array.from({length:C},(L,at)=>Number(at+1))}),Q=R(()=>{if(y.value===null)return[];if(y.value===0)return D.value=0,[0];const A=Number(y.value),C=Number(p.value);if(A===0)return D.value=null,null;const L=C||1,at=A*5;return Array.from({length:at-L+1},(nt,rt)=>Number(L+rt))}),U=(A,C,L,at)=>Number(A)>Number(L)?!0:Number(A)<Number(L)?!1:Number(C)>Number(at),P=()=>{if(l.value===y.value&&b.value===_.value&&p.value===D.value)return i.value=!0,setTimeout(()=>{i.value=!1},1e3),!0;i.value=!1},G=()=>{if(P())return;const A=f.value.findIndex(C=>Number(C.Id)===Number(g.value.Id));A!==-1?f.value[A]={...f.value[A],...g.value}:f.value.push(g.value),v.value=v.value.filter(C=>C.Id!==g.value.Id),a("updateSelectedArcanists",f.value),a("updateListArcanists",v.value),a("closeOverlay")},st=()=>{const A=f.value.findIndex(C=>Number(C.Id)===Number(g.value.Id));A!==-1&&f.value.splice(A,1),ot()},ot=()=>{a("closeOverlay")},et=(A,C)=>{switch(C){case"Current Insight":l.value=A;break;case"Current Level":b.value=A;break;case"Current Resonance":p.value=A;break;case"Goal Insight":y.value=A;break;case"Goal Level":_.value=A;break;case"Goal Resonance":D.value=A;break;case"Visible":c.value=A;break}};return gt([l,b,p,y,_,D],()=>{h.value+=1,b.value>$.value[$.value.length-1]&&(b.value=$.value[$.value.length-1]),_.value>I.value[I.value.length-1]&&(_.value=I.value[I.value.length-1]),Number(p.value)>Number(D.value)&&(D.value=p.value),p.value<O.value[0]&&(p.value=O.value[0]),D.value<Q.value[0]&&(D.value=Q.value[0]),U(l.value,b.value,y.value,_.value)&&(y.value=l.value,_.value=b.value)}),(A,C)=>(x(),M("div",rs,[e("div",is,[e("div",ls,[e("div",us,[N(Kt,{class:"ml-2",arcanist:r.value},null,8,["arcanist"]),e("h2",cs,S(A.$t(r.value.Name)),1),e("label",ds,[it(S(m.value)+" ",1),e("i",{class:z(["fa-solid fa-star",{"text-orange-300":m.value===6,"text-yellow-100":m.value===5,"text-purple-400":m.value===4,"text-sky-200":m.value===3,"text-green-200":m.value===2}])},null,2)]),e("div",{class:"tooltip","data-tip":A.$t("remove-arcanist")},[e("i",{onClick:st,class:"fas fa-trash-alt text-gray-500"})],8,hs)]),e("div",ps,[e("div",{class:"tooltip","data-tip":A.$t("hidden-show")},[e("div",{onClick:C[0]||(C[0]=L=>c.value=!c.value),class:z(["badge badge-ghost",c.value?"green-badge":"red-badge"])},[e("i",{class:z(c.value?"fa-regular fa-eye":"fa-regular fa-eye-slash")},null,2)],2)],8,ys),e("button",{onClick:ot,class:"text-white"},ms)])]),fs,e("div",gs,S(A.$t("current-level")),1),e("div",bs,[(x(),B(X,{key:h.value,modelValue:l.value,"onUpdate:modelValue":C[1]||(C[1]=L=>l.value=L),selected:l.value,label:"Current Insight",options:u.value,"onUpdate:selected":et},null,8,["modelValue","selected","options"])),_s,(x(),B(X,{key:h.value,modelValue:b.value,"onUpdate:modelValue":C[2]||(C[2]=L=>b.value=L),selected:b.value,label:"Current Level",options:$.value,"onUpdate:selected":et},null,8,["modelValue","selected","options"]))]),e("div",Ss,S(A.$t("goal-level")),1),e("div",Ds,[(x(),B(X,{key:h.value,modelValue:y.value,"onUpdate:modelValue":C[3]||(C[3]=L=>y.value=L),selected:y.value,label:"Goal Insight",options:w.value,"onUpdate:selected":et},null,8,["modelValue","selected","options"])),$s,(x(),B(X,{key:h.value,modelValue:_.value,"onUpdate:modelValue":C[4]||(C[4]=L=>_.value=L),selected:_.value,label:"Goal Level",options:I.value,"onUpdate:selected":et},null,8,["modelValue","selected","options"]))]),e("div",xs,S(A.$t("resonance")),1),e("div",ws,[(x(),B(X,{key:h.value,modelValue:p.value,"onUpdate:modelValue":C[5]||(C[5]=L=>p.value=L),selected:p.value,label:"Current Resonance",options:O.value,"onUpdate:selected":et},null,8,["modelValue","selected","options"])),Ms,(x(),B(X,{key:h.value,modelValue:D.value,"onUpdate:modelValue":C[6]||(C[6]=L=>D.value=L),selected:D.value,label:"Goal Resonance",options:Q.value,"onUpdate:selected":et},null,8,["modelValue","selected","options"]))]),e("div",Is,[e("button",{onClick:G,class:"btn btn-success"},S(A.$t("save")),1),i.value?(x(),M("div",ks,[e("div",As,[e("span",null,S(A.$t("current-and-goal-are-the-same")),1)])])):W("",!0)]),N(Te,{arcanist:g.value},null,8,["arcanist"])])]))}},Rs=["data-tip"],Ns={class:"rounded-md overflow-hidden w-12 h-12"},Qs={class:"avatar"},Os=["src","alt"],js={__name:"ArcanistIconToggle",props:{arcanist:{type:Number,required:!0},visible:{type:Boolean,required:!0}},setup(t){const s=t,o=F().arcanists.find(n=>n.Id===s.arcanist),a=n=>`images/arcanists/icon/${n}.png`;return(n,i)=>(x(),M("div",{class:"tooltip","data-tip":n.$t(E(o).Name)},[e("div",Ns,[e("div",Qs,[e("div",{class:z(["w-12 rounded",{"filter-grayscale opacity-50":!t.visible,"bg-orange-300":E(o).Rarity===6,"bg-yellow-100":E(o).Rarity===5,"bg-purple-400":E(o).Rarity===4,"bg-sky-200":E(o).Rarity===3,"bg-green-200":E(o).Rarity===2}])},[e("img",{src:a(E(o).Id),alt:E(o).Name},null,8,Os)],2)])])],8,Rs))}},Vs=lt(js,[["__scopeId","data-v-cc3c920e"]]),j=vt("warehouse",{state:()=>({data:[]}),actions:{initItem(t,s){this.data.push({Material:t,Quantity:0,Category:s})},removeItem(t){this.data=this.data.filter(s=>s.Material!==t)},addItem(t,s){this.data=this.data.map(o=>o.Material===t?{...o,Quantity:o.Quantity+s}:{...o})},reduceItem(t,s){this.data=this.data.map(o=>o.Material===t?{...o,Quantity:o.Quantity>=s?o.Quantity-s:o.Quantity}:{...o})},updateItem(t,s){this.data=this.data.map(o=>o.Material===t?{...o,Quantity:s}:{...o})},hasItem(t){return this.data.some(s=>s.Material===t)},getItemQuantity(t){var s;return((s=this.data.find(o=>o.Material===t))==null?void 0:s.Quantity)||0},resetAll(){this.data=this.data.map(t=>({...t,Quantity:0}))},resetCategory(t){this.data=this.data.map(s=>s.Category===t?{...s,Quantity:0}:{...s})}},persist:!0}),Es=["data-tip"],Ls={class:"relative inline-block"},Ps=["src"],Us=["src"],qs={__name:"ItemGoalIcon",props:{material:{type:Object,required:!0}},setup(t){const s=t,o=R(()=>_t(s.material)),a=()=>s.material.Quantity>99||j().getItemQuantity(s.material.Material)>99;return(n,i)=>(x(),M("div",{class:"tooltip","data-tip":n.$t(o.value.material)},[e("div",Ls,[e("img",{src:o.value.borderImagePath,alt:"Border Image",class:z(["w-20 h-20 absolute",{"w-36":a()}])},null,10,Ps),e("img",{src:o.value.itemImagePath,alt:"Material Image",class:z(["w-20 h-20",{"mx-5":a()}])},null,10,Us),e("div",{class:z(["text-white absolute -bottom-3 left-3 input input-xs rounded-t-none text-center",{"left-[17px] w-[85px]":a(),"w-14":!a(),"bg-green-800/80":E(j)().getItemQuantity(s.material.Material)>=s.material.Quantity,"bg-red-500/60":E(j)().getItemQuantity(s.material.Material)<s.material.Quantity}])},S(E(ft)(E(j)().getItemQuantity(o.value.material)))+" / "+S(o.value.quantity),3)])],8,Es))}},Ws={class:"p-2"},Fs={class:"flex flex-wrap justify-center space-x-2"},Ts={class:"flex justify-center items-center"},Bs={class:"btn btn-ghost custom-gradient-button btn-sm text-white",onclick:"goalMaterials.showModal()"},zs={id:"goalMaterials",class:"modal"},Gs={class:"modal-box custom-gradient-gray-blue custom-border hidden-scrollbar"},Hs=e("form",{method:"dialog"},[e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-white"},"✕")],-1),Ks={class:"font-bold text-lg text-white text-center"},Zs={class:"hidden-scrollbar pt-9 custom-item-list"},Js={method:"dialog",class:"flex justify-center pt-5"},Xs={class:"btn btn-sm btn-success text-black"},Ys=e("form",{method:"dialog",class:"modal-backdrop"},[e("button",null,"close")],-1),to={class:"text-center text-slate-300 text-sm opacity-70"},eo={__name:"PlannerSelector",props:{selectedArcanists:{type:Array,required:!0}},emits:["open-edit-overlay"],setup(t,{emit:s}){const o=t,a=s,n=k(o.selectedArcanists),i=r=>{a("open-edit-overlay",r)},h=r=>{r.isVisible=!r.isVisible},d=R(()=>{const r=n.value.map(l=>l.isVisible?Et(l):[]),f=Vt(r);return Fe(f)});return(r,f)=>(x(),M("div",Ws,[e("div",Fs,[(x(!0),M(T,null,tt(n.value,v=>(x(),B(Vs,{key:v.Id,arcanist:v.Id,visible:v.isVisible,onClick:l=>i(v),onContextmenu:de(l=>h(v),["prevent"]),class:"mb-2"},null,8,["arcanist","visible","onClick","onContextmenu"]))),128)),e("div",Ts,[e("button",Bs,S(r.$t("goal")),1),e("dialog",zs,[e("div",Gs,[Hs,e("h3",Ks,S(r.$t("total-goal-materials")),1),e("div",Zs,[(x(!0),M(T,null,tt(d.value,v=>(x(),B(qs,{class:"py-2",key:v,material:v},null,8,["material"]))),128))]),e("form",Js,[e("button",Xs,S(r.$t("close")),1)])]),Ys])])]),e("p",to,S(r.$t("left-click-to-edit-right-click-to-show-hide")),1)]))}},Z=(t,s,o)=>t.matrix[Math.imul(s,t.width)+o],H=(t,s,o,a)=>{t.matrix[Math.imul(s,t.width)+o]=a},Rt=t=>typeof t[Symbol.iterator]=="function"?t:Object.entries(t),qt=t=>t===!0?!0:t===!1?new Set:t instanceof Set?t:new Set(t),so=t=>{const{direction:s,objective:o,integers:a,binaries:n}=t,i=s==="minimize"?-1:1,h=Rt(t.constraints),d=Rt(t.variables),r=Array.isArray(d)?d:Array.from(d),f=[],v=[];if(a!=null||n!=null){const u=qt(n),w=u===!0?!0:qt(a);for(let $=1;$<=r.length;$++){const[I]=r[$-1];u===!0||u.has(I)?(f.push($),v.push($)):(w===!0||w.has(I))&&v.push($)}}const l=new Map;for(const[u,w]of h){const $=l.get(u)??{row:NaN,lower:-1/0,upper:1/0};$.lower=Math.max($.lower,w.equal??w.min??-1/0),$.upper=Math.min($.upper,w.equal??w.max??1/0),l.has(u)||l.set(u,$)}let b=1;for(const u of l.values())u.row=b,b+=(Number.isFinite(u.lower)?1:0)+(Number.isFinite(u.upper)?1:0);const p=r.length+1,y=b+f.length,_=p+y,D=new Float64Array(p*y),c=new Int32Array(_),g=new Int32Array(_),m={matrix:D,width:p,height:y,positionOfVariable:c,variableAtPosition:g};for(let u=0;u<_;u++)c[u]=u,g[u]=u;for(let u=1;u<p;u++)for(const[w,$]of Rt(r[u-1][1])){w===o&&H(m,0,u,i*$);const I=l.get(w);I!=null&&(Number.isFinite(I.upper)?(H(m,I.row,u,$),Number.isFinite(I.lower)&&H(m,I.row+1,u,-$)):Number.isFinite(I.lower)&&H(m,I.row,u,-$))}for(const u of l.values())Number.isFinite(u.upper)?(H(m,u.row,0,u.upper),Number.isFinite(u.lower)&&H(m,u.row+1,0,-u.lower)):Number.isFinite(u.lower)&&H(m,u.row,0,-u.lower);for(let u=0;u<f.length;u++){const w=b+u;H(m,w,0,1),H(m,w,f[u],1)}return{tableau:m,sign:i,variables:r,integers:v}},ee=(t,s)=>{const o=Math.round(1/s);return Math.round((t+Number.EPSILON)*o)/o},se=(t,s,o)=>{const a=Z(t,s,o),n=t.variableAtPosition[t.width+s],i=t.variableAtPosition[o];t.variableAtPosition[t.width+s]=i,t.variableAtPosition[o]=n,t.positionOfVariable[n]=o,t.positionOfVariable[i]=t.width+s;const h=[];for(let d=0;d<t.width;d++){const r=Z(t,s,d);Math.abs(r)>1e-16?(H(t,s,d,r/a),h.push(d)):H(t,s,d,0)}H(t,s,o,1/a);for(let d=0;d<t.height;d++){if(d===s)continue;const r=Z(t,d,o);if(Math.abs(r)>1e-16){for(let f=0;f<h.length;f++){const v=h[f];H(t,d,v,Z(t,d,v)-r*Z(t,s,v))}H(t,d,o,-r/a)}}},oe=(t,s,o,a)=>{t.push([s.variableAtPosition[s.width+o],s.variableAtPosition[a]]);for(let n=6;n<=Math.trunc(t.length/2);n++){let i=!0;for(let h=0;h<n;h++){const d=t.length-1-h,[r,f]=t[d],[v,l]=t[d-n];if(r!==v||f!==l){i=!1;break}}if(i)return!0}return!1},oo=(t,s)=>{const o=[],{precision:a,maxPivots:n,checkCycles:i}=s;for(let h=0;h<n;h++){let d=0,r=a;for(let l=1;l<t.width;l++){const b=Z(t,0,l);b>r&&(r=b,d=l)}if(d===0)return["optimal",ee(Z(t,0,0),a)];let f=0,v=1/0;for(let l=1;l<t.height;l++){const b=Z(t,l,d);if(b<=a)continue;const y=Z(t,l,0)/b;if(y<v&&(f=l,v=y,y<=a))break}if(f===0)return["unbounded",d];if(i&&oe(o,t,f,d))return["cycled",NaN];se(t,f,d)}return["cycled",NaN]},ae=(t,s)=>{const o=[],{precision:a,maxPivots:n,checkCycles:i}=s;for(let h=0;h<n;h++){let d=0,r=-a;for(let l=1;l<t.height;l++){const b=Z(t,l,0);b<r&&(r=b,d=l)}if(d===0)return oo(t,s);let f=0,v=-1/0;for(let l=1;l<t.width;l++){const b=Z(t,d,l);if(b<-a){const p=-Z(t,0,l)/b;p>v&&(v=p,f=l)}}if(f===0)return["infeasible",NaN];if(i&&oe(o,t,d,f))return["cycled",NaN];se(t,d,f)}return["cycled",NaN]};var ne={exports:{}};(function(t,s){(function(){var o,a,n,i,h,d,r,f,v,l,b,p,y,_,D;n=Math.floor,l=Math.min,a=function(c,g){return c<g?-1:c>g?1:0},v=function(c,g,m,u,w){var $;if(m==null&&(m=0),w==null&&(w=a),m<0)throw new Error("lo must be non-negative");for(u==null&&(u=c.length);m<u;)$=n((m+u)/2),w(g,c[$])<0?u=$:m=$+1;return[].splice.apply(c,[m,m-m].concat(g)),g},d=function(c,g,m){return m==null&&(m=a),c.push(g),_(c,0,c.length-1,m)},h=function(c,g){var m,u;return g==null&&(g=a),m=c.pop(),c.length?(u=c[0],c[0]=m,D(c,0,g)):u=m,u},f=function(c,g,m){var u;return m==null&&(m=a),u=c[0],c[0]=g,D(c,0,m),u},r=function(c,g,m){var u;return m==null&&(m=a),c.length&&m(c[0],g)<0&&(u=[c[0],g],g=u[0],c[0]=u[1],D(c,0,m)),g},i=function(c,g){var m,u,w,$,I,O;for(g==null&&(g=a),$=(function(){O=[];for(var Q=0,U=n(c.length/2);0<=U?Q<U:Q>U;0<=U?Q++:Q--)O.push(Q);return O}).apply(this).reverse(),I=[],u=0,w=$.length;u<w;u++)m=$[u],I.push(D(c,m,g));return I},y=function(c,g,m){var u;if(m==null&&(m=a),u=c.indexOf(g),u!==-1)return _(c,0,u,m),D(c,u,m)},b=function(c,g,m){var u,w,$,I,O;if(m==null&&(m=a),w=c.slice(0,g),!w.length)return w;for(i(w,m),O=c.slice(g),$=0,I=O.length;$<I;$++)u=O[$],r(w,u,m);return w.sort(m).reverse()},p=function(c,g,m){var u,w,$,I,O,Q,U,P,G;if(m==null&&(m=a),g*10<=c.length){if($=c.slice(0,g).sort(m),!$.length)return $;for(w=$[$.length-1],U=c.slice(g),I=0,Q=U.length;I<Q;I++)u=U[I],m(u,w)<0&&(v($,u,0,null,m),$.pop(),w=$[$.length-1]);return $}for(i(c,m),G=[],O=0,P=l(g,c.length);0<=P?O<P:O>P;0<=P?++O:--O)G.push(h(c,m));return G},_=function(c,g,m,u){var w,$,I;for(u==null&&(u=a),w=c[m];m>g;){if(I=m-1>>1,$=c[I],u(w,$)<0){c[m]=$,m=I;continue}break}return c[m]=w},D=function(c,g,m){var u,w,$,I,O;for(m==null&&(m=a),w=c.length,O=g,$=c[g],u=2*g+1;u<w;)I=u+1,I<w&&!(m(c[u],c[I])<0)&&(u=I),c[g]=c[u],g=u,u=2*g+1;return c[g]=$,_(c,O,g,m)},o=function(){c.push=d,c.pop=h,c.replace=f,c.pushpop=r,c.heapify=i,c.updateItem=y,c.nlargest=b,c.nsmallest=p;function c(g){this.cmp=g??a,this.nodes=[]}return c.prototype.push=function(g){return d(this.nodes,g,this.cmp)},c.prototype.pop=function(){return h(this.nodes,this.cmp)},c.prototype.peek=function(){return this.nodes[0]},c.prototype.contains=function(g){return this.nodes.indexOf(g)!==-1},c.prototype.replace=function(g){return f(this.nodes,g,this.cmp)},c.prototype.pushpop=function(g){return r(this.nodes,g,this.cmp)},c.prototype.heapify=function(){return i(this.nodes,this.cmp)},c.prototype.updateItem=function(g){return y(this.nodes,g,this.cmp)},c.prototype.clear=function(){return this.nodes=[]},c.prototype.empty=function(){return this.nodes.length===0},c.prototype.size=function(){return this.nodes.length},c.prototype.clone=function(){var g;return g=new c,g.nodes=this.nodes.slice(0),g},c.prototype.toArray=function(){return this.nodes.slice(0)},c.prototype.insert=c.prototype.push,c.prototype.top=c.prototype.peek,c.prototype.front=c.prototype.peek,c.prototype.has=c.prototype.contains,c.prototype.copy=c.prototype.clone,c}(),function(c,g){return t.exports=g()}(this,function(){return o})}).call(pe)})(ne);var ao=ne.exports,no=ao;const ro=ye(no),Wt=(t,s)=>({matrix:new Float64Array(t),positionOfVariable:new Int32Array(s),variableAtPosition:new Int32Array(s)}),io=(t,{matrix:s,positionOfVariable:o,variableAtPosition:a},n)=>{const{width:i,height:h}=t;s.set(t.matrix);for(let r=0;r<n.length;r++){const[f,v,l]=n[r],b=(h+r)*i,p=t.positionOfVariable[v];if(p<i)s[b]=f*l,s.fill(0,b+1,b+i),s[b+p]=f;else{const y=(p-i)*i;s[b]=f*(l-s[y]);for(let _=1;_<i;_++)s[b+_]=-f*s[y+_]}}o.set(t.positionOfVariable),a.set(t.variableAtPosition);const d=i+h+n.length;for(let r=i+h;r<d;r++)o[r]=r,a[r]=r;return{matrix:s.subarray(0,t.matrix.length+i*n.length),width:i,height:h+n.length,positionOfVariable:o.subarray(0,d),variableAtPosition:a.subarray(0,d)}},Ft=(t,s)=>{let o=0,a=0,n=0;for(let i=0;i<s.length;i++){const h=s[i],d=t.positionOfVariable[h]-t.width;if(d<0)continue;const r=Z(t,d,0),f=Math.abs(r-Math.round(r));f>o&&(o=f,a=h,n=r)}return[a,n,o]},lo=(t,s,o)=>{const{tableau:a,sign:n,integers:i}=t,{precision:h,maxIterations:d,tolerance:r,timeout:f}=o,[v,l,b]=Ft(a,i);if(b<=h)return[t,"optimal",s];const p=new ro((G,st)=>G[0]-st[0]);p.push([s,[[-1,v,Math.ceil(l)]]]),p.push([s,[[1,v,Math.floor(l)]]]);const y=i.length*2,_=a.matrix.length+y*a.width,D=a.positionOfVariable.length+y;let c=Wt(_,D),g=Wt(_,D);const m=s*(1-n*r),u=f+Date.now();let w=Date.now()>=u,$=!1,I=1/0,O=a,Q=0;for(;Q<d&&!p.empty()&&I>=m&&!w;){const[G,st]=p.pop();if(G>I)break;const ot=io(a,c,st),[et,A]=ae(ot,o);if(et==="optimal"&&A<I){const[C,L,at]=Ft(ot,i);if(at<=h){$=!0,I=A,O=ot;const nt=g;g=c,c=nt}else{const nt=[],rt=[];for(let mt=0;mt<st.length;mt++){const ut=st[mt],[It,kt]=ut;kt===C?It<0?rt.push(ut):nt.push(ut):(nt.push(ut),rt.push(ut))}rt.push([1,C,Math.floor(L)]),nt.push([-1,C,Math.ceil(L)]),p.push([A,nt]),p.push([A,rt])}}w=Date.now()>=u,Q++}const P=(w||Q>=d)&&!p.empty()&&I>=m?"timedout":$?"optimal":"infeasible";return[{...t,tableau:O},P,$?I:NaN]},Tt=({tableau:t,sign:s,variables:o},a,n,{precision:i,includeZeroVariables:h})=>{if(a==="optimal"||a==="timedout"&&!Number.isNaN(n)){const d=[];for(let r=0;r<o.length;r++){const[f]=o[r],v=t.positionOfVariable[r+1]-t.width,l=v>=0?Z(t,v,0):0;l>i?d.push([f,ee(l,i)]):h&&d.push([f,0])}return{status:a,result:-s*n,variables:d}}else if(a==="unbounded"){const d=t.variableAtPosition[n]-1;return{status:"unbounded",result:s*(1/0),variables:0<=d&&d<o.length?[[o[d][0],1/0]]:[]}}else return{status:a,result:NaN,variables:[]}},uo={precision:1e-8,checkCycles:!1,maxPivots:8192,tolerance:0,timeout:1/0,maxIterations:32768,includeZeroVariables:!1},re=(t,s)=>{const o=so(t),a={...uo,...s},[n,i]=ae(o.tableau,a);if(o.integers.length===0||n!=="optimal")return Tt(o,n,i,a);{const[h,d,r]=lo(o,i,a);return Tt(h,d,r,a)}},ie=F().formulas;function co(t){const s=le(),o=j().data,a={},n={},i=["Sinuous Howl","Interlaced Shudder","Hypocritical Murmur","Hoarse Echo","Sonorous Knell","Brief Cacophony","Moment of Dissonance","Crystal Casket"];t.forEach(({Material:y,Quantity:_})=>{i.includes(y)||(n[y]={min:_})});const h={},d=[];for(const{Name:y,Material:_,Quantity:D}of ie){if(a[y]={min:0},_.length===0)continue;const c={};_.forEach((m,u)=>{c[m]=-D[u]});const g=`Wilderness Wishing Spring - ${y}`;h[g]={[y]:1,...c,cost:0},d.includes(g)||d.push(g)}const r={};for(const y in s){const _=s[y],{count:D,cost:c,drops:g}=_;r[y]={cost:c};for(const m in g)r[y][m]=g[m]/D}const f={...a,...n};o.forEach(y=>{const{Material:_,Quantity:D}=y,c=D;c>0&&(f[_]?f[_]={min:f[_].min-c}:f[_]={min:-c})});const v=Object.assign({},h,r),p=re({objective:"cost",direction:"minimize",constraints:f,variables:v,integers:d},{maxIterations:1048576,tolerance:.25});return p.status!=="optimal"&&(console.log(`%cStatus: ${p.status}`,"background-color: yellow; color: black;"),console.log("constraints: ",f),console.log("variables: ",v)),p}function Nt(t){const s=bt().settings.activity;return Number((t/s).toFixed(1))}function ho(t){var I,O;let s=0;const o=t.find(Q=>Q.stage==="Wilderness Wishing Spring");o&&o.materials.forEach(({Material:Q,Quantity:U})=>{const P=ie.find(G=>G.Name===Q);P!=null&&P.Quantity.length&&(s+=(P==null?void 0:P.Quantity[(P==null?void 0:P.Quantity.length)-1])*U)});const a=q().getNeededMaterialsQuantity("Sharpodonty")+s,n=q().getNeededMaterialsQuantity("Dust");let i=0;const h=t.filter(Q=>Q.stage!=="The Poussiere VI"&&Q.stage!=="Mintage Aesthetics VI");h.forEach(Q=>{Q.stage!=="Oneiric Shop"&&(i+=Q.activity)});const d=bt().settings.activity,r=Nt(i),f=((I=j().data.find(Q=>Q.Material==="Sharpodonty"))==null?void 0:I.Quantity)||0,v=((O=j().data.find(Q=>Q.Material==="Dust"))==null?void 0:O.Quantity)||0,l=Jt().settings.wildernessOutput,b=Math.max(a-l.gold*r-f,0),p=Math.max(n-l.dust*r-v,0),y={"The Poussiere VI":{Dust:12e3+Number((l.dust*25/d).toFixed(1)),Sharpodonty:250+Number((l.gold*25/d).toFixed(1)),Cost:25},"Mintage Aesthetics VI":{Dust:0+Number((l.dust*25/d).toFixed(1)),Sharpodonty:9e3+Number((l.gold*25/d).toFixed(1)),Cost:25}},c=re({objective:"Cost",direction:"minimize",constraints:{Sharpodonty:{min:b},Dust:{min:p}},variables:y,integers:!0});let g=0,m=0;c.variables.forEach(([Q,U])=>{Q==="Mintage Aesthetics VI"?g=U:m=U});const u={stage:"Mintage Aesthetics VI",activityImagePath:"images/items/common/0.png",runs:g,activity:25*g,days:Nt(25*g),materials:[{Material:"Sharpodonty",Quantity:9e3*g}]},w={stage:"The Poussiere VI",activityImagePath:"images/items/common/0.png",runs:m,activity:25*m,days:Nt(25*m),materials:[{Material:"Dust",Quantity:12e3*m},{Material:"Sharpodonty",Quantity:250*m}]},$=[...h];return m>0&&$.push(w),g>0&&$.push(u),$}const Lt=F().items,po=F().formulas;function le(){const{enableGreedyMethod:t,enabledUnreleasedStages:s}=yt().settings,o=F();return t?o[s?"stages1_4_greedy":"stages_greedy"]||{}:o[s?"stages1_4":"stages"]||{}}function yo(t){const s=Lt.find(o=>o.Name===t.Material);if(s){const o=s.Rarity,a=t.Quantity;if(o===3)return a*40;if(o===4)return a*100;if(o===5)return a*250;if(o===6)return a*1500}return 0}function vo(t,s){var n;if(t.Quantity<=0||((n=Lt.find(i=>i.Name===t.Material))==null?void 0:n.Category)!=="Resonate Material")return;const a=ce("Oneiric Shop",s);a.materials.push(t),a.activity+=yo(t)}function mo(t){const s=j().data;return t.forEach(o=>{const a=s.find(n=>n.Category==="Resonate Material"&&n.Material===o.Material);a&&(o.Quantity-=a.Quantity)}),t}function fo(t,s){let o=0;if(t.forEach(a=>{const n=Lt.find(i=>i.Name===a.Material);(n==null?void 0:n.Category)!=="Resonate Material"||(n==null?void 0:n.Rarity)!==6||(o+=a.Quantity,a.Quantity=0)}),o>0){const a={Material:"Crystal Casket",Quantity:o};t.unshift(a)}mo(t),t.forEach(a=>{vo(a,s)})}function ue(t,s,o,a,n){return{stage:t,runs:s||0,activity:o||0,days:a||0,materials:n,activityImagePath:Ie(t)}}function ce(t,s){let o=s.find(a=>a.stage===t);return o||(o=ue(t,null,t==="Oneiric Shop"?0:null,null,[]),s.push(o)),o}function Bt(t,s){return t.sort((o,a)=>{if(o.stage==="Oneiric Shop")return-1;if(a.stage==="Oneiric Shop")return 1;const n=s[o.stage],i=s[a.stage];return n&&i?n.id-i.id:n?-1:i?1:0})}function go(t){return t.sort((s,o)=>s.stage==="Unreleased"?1:o.stage==="Unreleased"?-1:o.runs-s.runs)}function bo(t){const s=[],o=le();fo(t,s);const a=co(t);So(a.variables),a.variables.forEach(v=>{const l=o[v[0]];if(l){const b=Math.ceil(v[1]),p=Math.ceil(b*l.cost),y=Number((p/bt().settings.activity).toFixed(1));let _=Object.entries(l.drops).map(([c,g])=>{let m=g/l.count*b;return m=m%1>=.9?Math.ceil(m):Math.floor(m),{Material:c,Quantity:m}});_=_.filter(c=>c.Quantity>0);const D=ue(v[0],b,p,y,_);s.push(D)}else{const y={Material:v[0].split("-")[1].trim(),Quantity:v[1]};ce("Wilderness Wishing Spring",s).materials.push(y)}});const n=ho(s),i=n.filter(v=>["The Poussiere VI","Mintage Aesthetics VI","Oneiric Shop"].includes(v.stage)&&v.materials.length>0),h=n.filter(v=>(v.stage.endsWith("II")||v.stage.endsWith("IV")||v.stage.endsWith("VI"))&&!i.some(l=>l.stage===v.stage)&&v.materials.length>0),d=n.filter(v=>!["Wilderness Wishing Spring",...i.map(l=>l.stage),...h.map(l=>l.stage)].includes(v.stage)&&v.materials.length>0),r=n.filter(v=>["Wilderness Wishing Spring"].includes(v.stage)&&v.materials.length>0);return[{id:0,cards:Bt(i,o)},{id:1,cards:Bt(h,o)},{id:2,cards:go(d)},{id:3,cards:r}]}function _o(t){let s=0,o=0;return t.forEach(a=>{a.cards.forEach(n=>{n.days!==0&&(s+=n.activity,o+=parseFloat(n.days))})}),[s,o.toFixed(0)]}function So(t){const s={...q().neededRawMaterialsMapping};t.filter(([o])=>o.startsWith("Wilderness Wishing Spring")).forEach(([o,a])=>{const n=o.split("-")[1].trim(),i=po.find(h=>h.Name===n);i!=null&&i.Material.length&&(i==null||i.Material.forEach((h,d)=>{const r=i==null?void 0:i.Quantity[d];s[h]?s[h]+=r*a:s[h]=r*a}))}),q().updateNeededMaterialsMapping(s)}const Do={class:"pb-4"},$o={class:"relative flex flex-col"},xo={class:"relative"},wo=["src"],Mo=["src"],Io={class:"flex items-center justify-center font-bold w-20 mt-3"},ko=["disabled"],Ao=Y({__name:"WarehouseItemEditor",props:{normalizedMaterial:{type:Object,required:!0},material:{type:Object,required:!0}},setup(t){var v;const s=j(),{data:o}=xt(s),a=t,n=R(()=>o.value.find(l=>l.Material===a.material.Material)),i=k(((v=n.value)==null?void 0:v.Quantity)||0),h=()=>{const l=Number(i.value);isNaN(l)||j().updateItem(a.material.Material,l)},d=R(()=>i.value>0),r=()=>{j().reduceItem(a.material.Material,1)},f=()=>{j().addItem(a.material.Material,1)};return Ot(()=>{var l;i.value=((l=n.value)==null?void 0:l.Quantity)||0}),(l,b)=>(x(),M("div",Do,[e("div",$o,[e("div",xo,[e("img",{src:t.normalizedMaterial.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,wo),e("img",{src:t.normalizedMaterial.itemImagePath,alt:"Material Image",class:"w-20 h-20"},null,8,Mo)]),J(e("input",{"onUpdate:modelValue":b[0]||(b[0]=p=>i.value=p),onInput:h,type:"text",placeholder:"",class:"bg-slate-600 text-white w-14 input input-xs rounded-none text-center absolute right-3 bottom-6"},null,544),[[$t,i.value]]),e("div",Io,[e("button",{class:"btn btn-ghost custom-gradient-gray-blue-light btn-xs w-7 text-base rounded-t-none rounded-r-none text-white",disabled:!d.value,onClick:r},"-",8,ko),e("button",{class:"btn btn-ghost custom-gradient-gray-blue-light btn-xs w-7 text-base rounded-t-none rounded-l-none text-white",onClick:f},"+")])])]))}}),Co=lt(Ao,[["__scopeId","data-v-ebe2bb1a"]]),Ro={class:"relative inline-block"},No=["src"],Qo=["src"],Oo={class:"absolute text-white bottom-4 right-3 bg-gray-700 rounded-tl px-1 py-px text-xs"},jo=Y({__name:"MaterialFormulaItem",props:{material:{type:Object,required:!0}},setup(t){const s=j(),{data:o}=xt(s),a=t,n=R(()=>_t(a.material)),i=R(()=>{var h;return((h=o.value.find(d=>d.Material===a.material.Material))==null?void 0:h.Quantity)||0});return(h,d)=>(x(),M("div",Ro,[e("img",{src:n.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,No),e("img",{src:n.value.itemImagePath,alt:"Material Image",class:"w-20 h-20"},null,8,Qo),e("div",Oo,S(i.value>=1e3?n.value.quantity:`${i.value}/${n.value.quantity}`),1)]))}}),Vo={class:"flex flex-col bg-slate-300/10 rounded py-2"},Eo={class:"text-center text-white/95 text-sm opacity-80"},Lo={class:"grid grid-cols-2 sm:flex flex-row m-auto"},Po={class:"flex px-3 items-center justify-center gap-3"},Uo=["disabled"],qo=["disabled"],Wo=Y({__name:"MaterialCraftingRecipe",props:{normalizedMaterial:{type:Object,required:!0},material:{type:Object,required:!0},formula:{type:Object,required:!0}},setup(t){const s=j(),{data:o}=xt(s),a=t,n=()=>{if(a.formula){const r=a.formula;j().addItem(r.Name,1),r.Material.forEach((f,v)=>{const l=r.Quantity[v]||0;j().reduceItem(f,l)})}},i=R(()=>{var r,f;return(r=a.formula)!=null&&r.Material?!((f=a.formula)==null?void 0:f.Material.some((l,b)=>{var _,D;const p=((_=o.value.find(c=>c.Material===l))==null?void 0:_.Quantity)||0,y=(D=a.formula)==null?void 0:D.Quantity[b];return p<y})):!1}),h=()=>{if(a.formula){const r=a.formula;j().reduceItem(r.Name,1),r.Material.forEach((f,v)=>{const l=r.Quantity[v]||0;j().addItem(f,l)})}},d=R(()=>{var v;const r=a.material.Material;return(((v=o.value.find(l=>l.Material===r))==null?void 0:v.Quantity)||0)>0});return(r,f)=>{var v;return x(),M("div",Vo,[e("p",Eo,S(r.$t("crafting-recipe")),1),e("div",Lo,[(x(!0),M(T,null,tt((v=t.formula)==null?void 0:v.Material,(l,b)=>{var p;return x(),M("div",{key:b},[N(jo,{material:{Material:l,Quantity:(p=t.formula)==null?void 0:p.Quantity[b]}},null,8,["material"])])}),128))]),e("div",Po,[e("button",{class:"btn btn-ghost custom-gradient-gray-blue-light btn-xs font-bold text-white/95",onClick:n,disabled:!i.value},S(r.$t("craft")),9,Uo),e("button",{class:"btn btn-ghost custom-gradient-gray-blue-light btn-xs font-bold text-white/95",onClick:h,disabled:!d.value},S(r.$t("reverse")),9,qo)])])}}}),Fo=lt(Wo,[["__scopeId","data-v-dfe3a55d"]]),To={class:"relative inline-block"},Bo=["src"],zo=["src"],Go={class:"absolute text-white bottom-4 right-3 bg-gray-700 rounded-tl px-1 py-px text-xs cursor-default"},Ho={class:"flex items-center justify-center flex-col"},Ko={key:0,class:"text-center text-slate-300 text-sm opacity-80"},Zo={class:"text-white"},Jo={key:1,class:"text-center text-slate-300 text-sm opacity-80"},Xo={class:"text-white"},Yo={class:"text-center text-slate-300 text-sm opacity-80"},ta={class:"text-white"},ea={key:2,class:"text-center text-slate-300 text-sm opacity-80"},sa={class:"text-white"},oa={class:"flex pt-2 justify-center items-center"},aa=Y({__name:"MaterialItem",props:{material:{type:Object,required:!0},layerId:{type:Number,required:!0}},setup(t){var m;const s=t,o=k(s.material.Quantity),a=R(()=>_t(s.material)),n=F().items,i=j(),{data:h}=xt(i),d=R(()=>n.find(u=>u.Name===s.material.Material)),r=R(()=>h.value.find(u=>u.Material===s.material.Material)),f=R(()=>{if(s.material.Material==="Crystal Casket"){let w=0;return F().items.filter($=>$.Category==="Resonate Material"&&$.Rarity===6).forEach($=>{w+=q().getNeededRawMaterialsQuantity($.Name)}),w}return q().getNeededRawMaterialsQuantity(a.value.material)}),v=R(()=>s.material.Material==="Crystal Casket"?f.value:q().getNeededMaterialsQuantity(a.value.material)),l=R(()=>Math.max(v.value-f.value,0)),b=R(()=>{var u;return(((u=r.value)==null?void 0:u.Quantity)||0)>=v.value}),p=R(()=>F().formulas.find(u=>u.Name===s.material.Material));gt(()=>s.material,u=>{o.value=u.Quantity});const y=k(r.value?(m=r.value)==null?void 0:m.Quantity:0),_=k(0);gt(r,u=>{if(q().isEditingMaterial===s.material.Material){const w=u?u.Quantity:0;_.value=w-y.value}});const D=()=>{var u;y.value=r.value?(u=r.value)==null?void 0:u.Quantity:0,_.value=0,q().setIsEditingWarehouse(!0),q().setIsEditingMaterial(s.material.Material)},c=()=>{var u;q().setIsEditingWarehouse(!1),q().setIsEditingMaterial(),y.value=r.value?(u=r.value)==null?void 0:u.Quantity:0,_.value=0},g=R(()=>{var u,w;return((u=d.value)==null?void 0:u.Category)==="Build Material"&&((w=d.value)==null?void 0:w.Rarity)<6});return(u,w)=>{const $=jt("i18n-t");return x(),B(E(he),{arrow:"",placement:"top",offsetDistance:"2","onOpen:popper":D,"onClose:popper":c},{content:K(()=>{var I;return[e("div",Ho,[s.layerId===1||s.layerId===2?(x(),M("p",Ko,[N($,{keypath:"numbers-expected-to-drop"},{numbers:K(()=>[e("span",Zo,S(s.material.Quantity),1)]),_:1})])):W("",!0),s.layerId===3?(x(),M("p",Jo,[N($,{keypath:"numbers-expected-to-be-crafted"},{numbers:K(()=>[e("span",Xo,S(Math.max(s.material.Quantity-_.value,0)),1)]),_:1})])):W("",!0),e("p",Yo,[N($,{keypath:"numbers-needed-to-complete-the-goal"},{numbers:K(()=>[e("span",ta,S(v.value),1)]),_:1})]),(g.value||s.material.Material==="Sharpodonty")&&l.value>0?(x(),M("p",ea,[N($,{keypath:"with-numbers-used-in-crafting"},{numbers:K(()=>[e("span",sa,S(l.value),1)]),_:1})])):W("",!0),e("div",oa,[N(Co,{material:t.material,normalizedMaterial:a.value},null,8,["material","normalizedMaterial"]),(I=p.value)!=null&&I.Material.length?(x(),B(Fo,{key:0,material:t.material,normalizedMaterial:a.value,formula:p.value},null,8,["material","normalizedMaterial","formula"])):W("",!0)])])]}),default:K(()=>[e("div",{class:z(["cursor-pointer",b.value?"opacity-40":""])},[e("div",To,[e("img",{src:a.value.borderImagePath,alt:"Border Image",class:"w-20 h-20 absolute"},null,8,Bo),e("img",{src:a.value.itemImagePath,alt:"Material Image",class:"w-20 h-20"},null,8,zo),e("div",Go,S(a.value.quantity),1)])],2)]),_:1})}}}),zt=lt(aa,[["__scopeId","data-v-44c5a571"]]),na=t=>(wt("data-v-060c0c0e"),t=t(),Mt(),t),ra={class:"bg-gray-700/40 shadow rounded flex flex-col items-center justify-between relative"},ia={class:"stage text-white p-2"},la=["data-tip"],ua={class:"calculations flex justify-center items-center bg-gradient-to-r from-blue-800/70 to-blue-900/90 text-white p-2 rounded-md"},ca={key:0,class:"border-blue-700/90 border-r pr-3"},da=na(()=>e("i",{class:"fa-solid fa-xmark text-xs mr-0.5"},null,-1)),ha={key:1},pa={key:2,class:"pl-2"},ya={key:3},va={class:"border-blue-700/90 border-r pr-3"},ma={class:"pl-3"},fa=["src"],ga={class:"border-blue-700/90 border-l pl-3"},ba=Y({__name:"PlannerCard",props:{card:{type:Object,required:!0},layerId:{type:Number,required:!0}},setup(t){const{t:s}=Qt(),o=t,a=R(()=>o.card.materials.length<4),n=k(null);gt(a,h=>{h&&n.value&&(n.value.scrollLeft=0)});const i=R(()=>{if(!(o.layerId===3||o.card.stage==="Unreleased"))return o.card.stage==="Oneiric Shop"?s("number-of-oneiric-fluid"):s("number-of-runs")+" | "+s("activities")+" | "+s("uppercase-days")});return(h,d)=>(x(),M("div",ra,[e("div",ia,[e("p",null,S(h.$t(t.card.stage)),1)]),e("div",{class:"tooltip w-full","data-tip":i.value},[e("div",ua,[t.card.stage!=="Unreleased"?(x(),M("p",ca,[J(e("span",null,[da,it(S(t.card.runs),1)],512),[[Ct,t.card.runs>0]])])):(x(),M("p",ha,S(h.$t("available-after-1-4-version-update")),1)),t.card.activity!==0?(x(),M("p",pa,S(t.card.activity),1)):t.layerId===3?(x(),M("p",ya,[e("span",va,S(h.$t("crafted-from-available-materials")),1),e("span",ma,S(h.$t("list-includes-dependencies")),1)])):W("",!0),J(e("img",{src:t.card.activityImagePath,alt:"Activity Image",class:"inline-block w-8 h-8"},null,8,fa),[[Ct,t.card.activity]]),e("p",ga,[J(e("span",null,S(t.card.days)+" "+S(t.card.days===0?"":t.card.days>1?h.$t("days"):h.$t("day")),513),[[Ct,t.card.days>0]])])])],8,la),t.card.stage==="Unreleased"?(x(),M("div",{key:0,ref_key:"scrollDiv",ref:n,class:z([{"hidden-scrollbar":a.value},"flex overflow-y-hidden overflow-x-auto scrollbar m-auto"])},[(x(!0),M(T,null,tt(t.card.materials.filter(r=>E(q)().neededRawMaterialsMapping[r.Material]>0),(r,f)=>(x(),M("div",{key:f,class:"flex-shrink-0"},[N(zt,{material:{...r,Quantity:0},layerId:t.layerId},null,8,["material","layerId"])]))),128))],2)):(x(),M("div",{key:1,ref_key:"scrollDiv",ref:n,class:z([{"hidden-scrollbar":a.value},"flex overflow-y-hidden overflow-x-auto scrollbar m-auto"])},[(x(!0),M(T,null,tt(t.card.materials,(r,f)=>(x(),M("div",{key:f,class:"flex-shrink-0"},[N(zt,{material:r,layerId:t.layerId},null,8,["material","layerId"])]))),128))],2))]))}}),_a=lt(ba,[["__scopeId","data-v-060c0c0e"]]),Sa={class:"w-full mb-4 flex flex-col"},Da=Y({__name:"PlannerLayer",props:{layer:{type:Object,required:!0}},setup(t){const{t:s}=Qt(),o=t,a=R(()=>o.layer.cards&&o.layer.cards.length>0),n=R(()=>{switch(o.layer.id){case 0:return"yellow-badge";case 1:return"indigo-badge";case 2:return"purple-badge";case 3:return"green-badge";default:return"red-badge"}}),i=R(()=>{switch(o.layer.id){case 0:return s("resources");case 1:return s("insight");case 2:return s("hard-stages");case 3:return s("crafting");default:return"Undefined"}}),h=R(()=>{switch(o.layer.id){case 2:return"mb-2 gap-5 grid grid-cols-1 lg:grid-cols-2";case 3:return"mb-2 gap-5 grid grid-cols-1";default:return"mb-2 gap-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4"}});return(d,r)=>(x(),M("div",Sa,[a.value?(x(),M("div",{key:0,class:z(["badge badge-lg badge-ghost mt-2 mb-2 w-32",n.value])},S(i.value),3)):W("",!0),e("div",{class:z(h.value)},[(x(!0),M(T,null,tt(t.layer.cards,(f,v)=>(x(),B(_a,{key:v,card:f,layerId:o.layer.id},null,8,["card","layerId"]))),128))],2)]))}}),$a={class:"flex flex-wrap"},xa={class:"text-center text-info font-bold text-sm hover:text-blue-200 opacity-90",onclick:"process_explaination.showModal()"},wa={id:"process_explaination",class:"modal"},Ma={class:"modal-box custom-gradient-gray-blue border border-blue-800"},Ia=e("form",{method:"dialog"},[e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-white"},"✕")],-1),ka={class:"py-4 text-white"},Aa=e("br",null,null,-1),Ca=e("br",null,null,-1),Ra={class:"text-yellow-500"},Na={class:"text-blue-500"},Qa=e("br",null,null,-1),Oa=e("br",null,null,-1),ja={class:"text-purple-500"},Va={class:"text-green-500"},Ea=e("br",null,null,-1),La=e("br",null,null,-1),Pa=e("br",null,null,-1),Ua=e("br",null,null,-1),qa={class:"text-red-500"},Wa={class:"text-purple-500"},Fa={class:"text-red-500"},Ta=e("form",{method:"dialog",class:"modal-backdrop"},[e("button",null,"Close")],-1),Ba=Y({__name:"PlannerResult",emits:["update:totalActivityAndDays"],setup(t,{emit:s}){const o=s,a=k([]);return Ot(()=>{if(!q().isEditingWarehouse){const n=Zt().selectedArcanists.map(d=>d.isVisible?Et(d):[]),i=Vt(n),h=bo(i);o("update:totalActivityAndDays",_o(h)),a.value=h}}),(n,i)=>{const h=jt("i18n-t");return x(),M("div",$a,[e("button",xa,S(n.$t("planner-calculation-explanation")),1),e("dialog",wa,[e("div",Ma,[Ia,e("div",null,[e("p",ka,[it(S(n.$t("when-you-add-arcanists-to-the-planner-with-their-current-goal-levels-and-resonance-you-will-see-several-sections-appear-below"))+" ",1),Aa,Ca,N(h,{keypath:"the-resources-and-insight-sections-are-straightforward-and-they-show-you-how-many-times-you-need-to-run-each-stage-in-order-to-get-the-materials-based-on-your-intended-arcanist-levels-since-we-cant-farm-resonance-materials-those-are-shown-with-the-cost-associated-in-the-oneiric-shop-found-in-the-bank"},{resources:K(()=>[e("span",Ra,S(n.$t("resources")),1)]),insight:K(()=>[e("span",Na,S(n.$t("insight")),1)]),_:1}),Qa,Oa,N(h,{keypath:"the-other-two-sections-are-hard-stages-and-crafting-these-results-have-been-optimized-to-reduce-the-stamina-required-for-farming-these-materials-by-running-the-listed-stages-the-number-of-times-it-suggests-it-is-expected-you-will-receive-all-the-materials-you-need-the-materials-obtained-from-the-hard-stage-farming-will-help-you-make-the-items-listed-in-the-crafting-section"},{hardstages:K(()=>[e("span",ja,S(n.$t("hard-stages")),1)]),crafting:K(()=>[e("span",Va,S(n.$t("crafting")),1)]),_:1}),Ea,La,it(" "+S(n.$t("as-you-obtain-materials-from-farming-hard-stages-its-recommended-that-you-update-your-warehouse-values-so-that-the-planner-remains-up-to-date-and-your-results-are-accurate"))+" ",1),Pa,Ua,N(h,{keypath:"please-note-that-we-do-not-know-exact-drop-rates-so-we-can-only-show-what-youre-expected-to-get-not-what-you-will-get-exactly-the-hard-stages-section-will-also-show-any-drop-that-you-may-get-rather-than-only-the-items-that-you-need-this-does-not-affect-the-results-of-the-farm-plan"},{expected:K(()=>[e("span",qa,S(n.$t("expected")),1)]),hardstages:K(()=>[e("span",Wa,S(n.$t("hard-stages")),1)]),any:K(()=>[e("span",Fa,S(n.$t("any")),1)]),_:1})])])]),Ta]),(x(!0),M(T,null,tt(a.value,(d,r)=>(x(),B(Da,{key:r,layer:d},null,8,["layer"]))),128))])}}}),za="/Kornblume/images/items/common/0.png",Ga="/Kornblume/images/items/icon/51.png",Ha="/Kornblume/images/items/icon/55.png",Ka="/Kornblume/images/items/icon/54.png",St=t=>(wt("data-v-40156cb9"),t=t(),Mt(),t),Za={class:"flex flex-wrap custom-gradient-gray-blue-light px-2 py-2 md:px-4 lg:px-6 rounded-md items-center justify-center"},Ja=St(()=>e("i",{class:"fa-solid fa-calculator text-white mr-3"},null,-1)),Xa=["data-tip"],Ya={class:"text"},tn=St(()=>e("div",{class:"avatar"},[e("div",{class:"w-8 rounded"},[e("img",{src:za,alt:"avatar"})])],-1)),en={class:"text pr-3"},sn=["data-tip"],on={class:"text"},an={key:1,class:"avatar"},nn=St(()=>e("div",{class:"w-8 rounded"},[e("img",{src:Ga,alt:"avatar"})],-1)),rn=[nn],ln=["data-tip"],un={class:"text"},cn=St(()=>e("div",{class:"avatar"},[e("div",{class:"w-8 rounded"},[e("img",{src:Ha,alt:"avatar"})])],-1)),dn=["data-tip"],hn={class:"text"},pn=St(()=>e("div",{class:"avatar"},[e("div",{class:"w-8 rounded"},[e("img",{src:Ka,alt:"avatar"})])],-1)),yn={__name:"PlannerTotal",props:{totalActivityAndDays:{type:Array,required:!0},wildernessSettings:{type:Object,required:!0}},setup(t){const s=bt();return(o,a)=>{var n,i,h;return x(),M("div",Za,[Ja,e("div",{class:"tooltip flex items-center","data-tip":o.$t("estimated-total-activities-and-days")},[e("div",Ya,S((n=t.totalActivityAndDays)==null?void 0:n[0]),1),tn,e("div",en,S((i=t.totalActivityAndDays)==null?void 0:i[1])+" "+S(((h=t.totalActivityAndDays)==null?void 0:h[1])>1?o.$t("days"):o.$t("day")),1)],8,Xa),E(s).settings.cost>0?(x(),M("div",{key:0,class:"tooltip","data-tip":o.$t("drops-cost")},[e("div",on,S(E(ft)(E(s).settings.cost)*t.totalActivityAndDays[1]),1)],8,sn)):W("",!0),E(s).settings.cost>0?(x(),M("div",an,rn)):W("",!0),e("div",{class:"tooltip tooltip-left","data-tip":o.$t("wilderness-production")},[e("div",un,S(E(ft)(t.wildernessSettings.wildernessOutput.dust*t.totalActivityAndDays[1])),1)],8,ln),cn,e("div",{class:"tooltip tooltip-left","data-tip":o.$t("wilderness-production")},[e("div",hn,S(E(ft)(t.wildernessSettings.wildernessOutput.gold*t.totalActivityAndDays[1])),1)],8,dn),pn])}}},vn=lt(yn,[["__scopeId","data-v-40156cb9"]]),mn={class:"list-overlay"},fn={class:"custom-modal-small h-auto"},gn=e("i",{class:"fas fa-times"},null,-1),bn=[gn],_n={class:"text-white text-center text-lg font-bold"},Sn={class:"text-info text-center pb-5"},Dn={class:"font-bold"},$n={class:"grid grid-cols-1 space-y-3"},xn={class:"form-control"},wn={class:"cursor-pointer label justify-center"},Mn={class:"label-text text-white mr-3"},In=["checked"],kn=["data-tip"],An={class:"form-control"},Cn={class:"cursor-pointer label justify-center"},Rn={class:"label-text text-white mr-3"},Nn=["checked"],Qn=["data-tip"],On={class:"form-control"},jn={class:"cursor-pointer label justify-center"},Vn={class:"label-text text-white mr-3"},En=["checked"],Ln={class:"flex items-center justify-center translate-x-4"},Pn={class:"label-text text-white"},Un={class:"flex justify-center pt-3"},qn={__name:"PlannerActivity",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveActivitySettings:{type:Function,required:!0}},setup(t,{emit:s}){const o=t,a=s,n=[0,1,2,3,4,5,6,7,8],i=[0,60,90,120,120,150,150,200,200],h=k(o.settings.roaringMonth),d=k(o.settings.lazyModo),r=k(o.settings.weeklyActivity),f=k(o.settings.refills),v=R(()=>{let _=d.value?190:240;return h.value&&(_+=60),_+=f.value*100,r.value&&(_+=Math.floor(240/7)),_}),l=R(()=>{let _=0;for(let D=0;D<=f.value;D++)_+=i[D];return _}),b=_=>{f.value=_},p=()=>{const _={roaringMonth:h.value,lazyModo:d.value,weeklyActivity:r.value,refills:f.value,activity:v.value,cost:l.value};a("saveActivitySettings",_),y()},y=()=>{a("closeOverlay")};return(_,D)=>(x(),M("div",mn,[e("div",fn,[e("button",{onClick:y,class:"absolute top-2 right-4 text-white"},bn),e("p",_n,S(_.$t("activity-settings")),1),e("p",Sn,[it(S(_.$t("current-per-day"))+" ",1),e("span",Dn,S(v.value),1)]),e("div",$n,[e("div",xn,[e("label",wn,[e("span",Mn,S(_.$t("roaring-month")),1),J(e("input",{"onUpdate:modelValue":D[0]||(D[0]=c=>h.value=c),type:"checkbox",checked:h.value,class:"checkbox checkbox-info"},null,8,In),[[dt,h.value]])])]),e("div",{class:"tooltip","data-tip":_.$t("240-activities-per-week")},[e("div",An,[e("label",Cn,[e("span",Rn,S(_.$t("weekly-activeness")),1),J(e("input",{"onUpdate:modelValue":D[1]||(D[1]=c=>r.value=c),type:"checkbox",checked:r.value,class:"checkbox checkbox-info"},null,8,Nn),[[dt,r.value]])])])],8,kn),e("div",{class:"tooltip","data-tip":_.$t("login-once-per-day-for-base-190-activities")},[e("div",On,[e("label",jn,[e("span",Vn,S(_.$t("lazy-modo")),1),J(e("input",{"onUpdate:modelValue":D[2]||(D[2]=c=>d.value=c),type:"checkbox",checked:d.value,class:"checkbox checkbox-info"},null,8,En),[[dt,d.value]])])])],8,Qn),e("div",Ln,[e("span",Pn,S(_.$t("daily-refill")),1),N(X,{class:"w-1/3",options:n,selected:f.value,label:"refills","onUpdate:selected":b},null,8,["selected"])])]),e("div",Un,[e("button",{onClick:p,class:"btn btn-success"},S(_.$t("save")),1)])])]))}},Wn=t=>(wt("data-v-c1bd4a6f"),t=t(),Mt(),t),Fn={class:"list-overlay"},Tn={class:"custom-modal-small h-auto"},Bn=Wn(()=>e("i",{class:"fas fa-times"},null,-1)),zn=[Bn],Gn={class:"custom-label text-yellow-100"},Hn={class:"grid grid-cols-3"},Kn={class:"custom-label text-yellow-100"},Zn={class:"grid grid-cols-3"},Jn={class:"custom-label text-yellow-100"},Xn={class:"grid grid-cols-2 p-2 items-center"},Yn=["placeholder"],tr=["data-tip"],er={class:"form-control"},sr={class:"cursor-pointer label justify-center"},or={class:"label-text text-yellow-100 mr-3"},ar=["checked"],nr={class:"custom-label text-yellow-100"},rr={class:"grid grid-cols-2 p-2"},ir=["data-tip"],lr={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},ur=["data-tip"],cr={class:"flex items-center justify-center gradient-blue text-center rounded-xl mx-5 lg:mx-2 h-8"},dr={class:"text-yellow-100 text-sm text-center p-2"},hr={class:"flex justify-center"},pr={__name:"PlannerWilderness",props:{settings:{type:Object,required:!0}},emits:{closeOverlay:{type:Function,required:!0},saveWildernessSettings:{type:Function,required:!0}},setup(t,{emit:s}){const o=t,a=s,n=()=>{a("closeOverlay")},i=k(o.settings.dust1),h=k(o.settings.dust2),d=k(o.settings.dust3),r=k(o.settings.gold1),f=k(o.settings.gold2),v=k(o.settings.gold3),l=k(o.settings.vigor),b=k(o.settings.lazyModo),p=[0,1,2,3,4,5,6],y=[0,120,150,175,210,240,270],_=[0,60,75,80,96,108,120],D=(u,w)=>{switch(w){case"Dust 1":i.value=u;break;case"Dust 2":h.value=u;break;case"Dust 3":d.value=u;break;case"Gold 1":r.value=u;break;case"Gold 2":f.value=u;break;case"Gold 3":v.value=u;break}},c=()=>{const u=parseInt(l.value,10);if(isNaN(u)){l.value=null;return}if(u<0){l.value=0;return}if(u>50){l.value=50;return}l.value=u},g=()=>{const u={dust1:i.value,dust2:h.value,dust3:d.value,gold1:r.value,gold2:f.value,gold3:v.value,vigor:l.value,lazyModo:b.value,wildernessOutput:m.value};a("saveWildernessSettings",u),n()},m=R(()=>{const u=y[i.value]+y[h.value]+y[d.value],w=_[r.value]+_[f.value]+_[v.value],$=l.value?parseFloat(l.value/100):0,I=b.value?20:24,O=Math.ceil(u*(1+$)*I),Q=Math.ceil(w*(1+$)*I);return{dust:O,gold:Q}});return(u,w)=>(x(),M("div",Fn,[e("div",Tn,[e("button",{onClick:n,class:"absolute top-2 right-4 text-white"},zn),e("div",Gn,S(u.$t("dust-bell-towers")),1),e("div",Hn,[N(X,{class:"select-list",options:p,selected:i.value,label:"Dust 1","onUpdate:selected":D},null,8,["selected"]),N(X,{class:"select-list",options:p,selected:h.value,label:"Dust 2","onUpdate:selected":D},null,8,["selected"]),N(X,{class:"select-list",options:p,selected:d.value,label:"Dust 3","onUpdate:selected":D},null,8,["selected"])]),e("div",Kn,S(u.$t("sharpodonty-markets")),1),e("div",Zn,[N(X,{class:"select-list",options:p,selected:r.value,label:"Gold 1","onUpdate:selected":D},null,8,["selected"]),N(X,{class:"select-list",options:p,selected:f.value,label:"Gold 2","onUpdate:selected":D},null,8,["selected"]),N(X,{class:"select-list",options:p,selected:v.value,label:"Gold 3","onUpdate:selected":D},null,8,["selected"])]),e("div",Jn,S(u.$t("vigor-percent")),1),e("div",Xn,[J(e("input",{onInput:c,"onUpdate:modelValue":w[0]||(w[0]=$=>l.value=$),type:"text",placeholder:u.$t("vigor"),class:"input input-bordered input-info input-sm mx-10 lg:mx-5 gradient-blue text-center"},null,40,Yn),[[$t,l.value]]),e("div",{class:"tooltip","data-tip":u.$t("collect-once-a-day")},[e("div",er,[e("label",sr,[e("span",or,S(u.$t("lazy-modo")),1),J(e("input",{"onUpdate:modelValue":w[1]||(w[1]=$=>b.value=$),type:"checkbox",checked:b.value,class:"checkbox checkbox-info"},null,8,ar),[[dt,b.value]])])])],8,tr)]),e("div",nr,S(u.$t("output")),1),e("div",rr,[e("div",{class:"tooltip","data-tip":u.$t("Dust")},[e("label",lr,S(m.value.dust),1)],8,ir),e("div",{class:"tooltip","data-tip":u.$t("Sharpodonty")},[e("label",cr,S(m.value.gold),1)],8,ur)]),e("p",dr,S(u.$t("wilderness-output-will-be-considered-for-calculations")),1),e("div",hr,[e("button",{onClick:g,class:"btn btn-success"},S(u.$t("save")),1)])])]))}},yr=lt(pr,[["__scopeId","data-v-c1bd4a6f"]]),vr={class:"pb-6"},mr={class:"relative inline-block"},fr=["src"],gr=["src"],br=Y({__name:"WarehouseItem",props:{material:{type:Object,required:!0}},emits:["update:quantity"],setup(t,{emit:s}){const o=t,a=s,n=k(o.material.Quantity),i=R(()=>_t(o.material)),h=()=>{const d=Number(n.value);isNaN(d)||a("update:quantity",Number(n.value))};return gt(()=>o.material,d=>{n.value=d.Quantity}),(d,r)=>(x(),M("div",vr,[e("div",mr,[e("img",{src:i.value.borderImagePath,alt:"Border Image",class:z(["w-20 h-20 absolute",{"w-36":i.value.material==="Sharpodonty"||i.value.material==="Dust"}])},null,10,fr),e("img",{src:i.value.itemImagePath,alt:"Material Image",class:z(["w-20 h-20",{"mx-5":i.value.material==="Sharpodonty"||i.value.material==="Dust"}])},null,10,gr),J(e("input",{"onUpdate:modelValue":r[0]||(r[0]=f=>n.value=f),onInput:h,type:"text",placeholder:"",class:z(["bg-slate-600 text-white absolute -bottom-3 left-3 w-14 input input-xs rounded-t-none text-center",{"left-[17px] w-[85px]":i.value.material==="Sharpodonty"||i.value.material==="Dust"}])},null,34),[[$t,n.value]])])]))}});function _r(t){const s=F().shops;t in s?s[t].forEach(a=>{const{Material:n,Quantity:i}=a;j().addItem(n,i)}):console.error(`Version ${t} not found in shops data.`)}const Sr=()=>{const t=yt().settings.enabledUnreleasedStages;console.log("Initialize warehouse"),F().items.forEach(s=>{(s.IsReleased||t)&&(s.Category==="Build Material"||s.Category==="Insight Material"||s.Category==="Resonate Material"&&s.Rarity<6||s.Name==="Dust"||s.Name==="Sharpodonty"||s.Name==="Crystal Casket")&&j().initItem(s.Name,s.Category)})},Dr=()=>{const t=yt().settings.enabledUnreleasedStages;F().items.forEach(s=>{!j().hasItem(s.Name)&&(s.Name==="Crystal Casket"||!s.IsReleased&&t)?j().initItem(s.Name,s.Category):!s.IsReleased&&!t&&j().removeItem(s.Name)})},Gt={"Base Item":0,"Resonate Material":1,"Insight Material":2,"Build Material":2},$r=t=>{const s=F().items;t.sort((o,a)=>{const n=s.findIndex(r=>r.Name===o.Material),i=s.findIndex(r=>r.Name===a.Material),h=s[n],d=s[i];if(h&&d){const r=Gt[h.Category],f=Gt[d.Category];return r!==f?r-f:d.Rarity!==h.Rarity?d.Rarity-h.Rarity:n-i}else return i-n})},xr=["data-tip"],wr={class:"modal-box custom-gradient-gray-blue custom-border"},Mr={class:"py-4 text-lg text-white text-center"},Ir={class:"py-4 text-md text-white text-center"},kr={class:"flex justify-center"},Ar=e("form",{method:"dialog",class:"modal-backdrop"},[e("button")],-1),pt=Y({__name:"EventShopButton",props:{version:{},text:{},type:{}},emits:["closeOverlay"],setup(t,{emit:s}){const o=k(),a=s,n=t,i=()=>{_r(n.version),a("closeOverlay"),d()},h=()=>{var r;return(r=o.value)==null?void 0:r.showModal()},d=()=>{var r;return(r=o.value)==null?void 0:r.close()};return(r,f)=>(x(),M(T,null,[e("div",{class:"tooltip","data-tip":r.type},[e("button",{class:"btn btn-info btn-sm",onClick:h},S(r.text),1)],8,xr),e("dialog",{ref_key:"dialog",ref:o,class:"modal"},[e("div",wr,[e("p",Mr,S(r.$t("add-materials-from-text",[r.text])),1),e("p",Ir,S(r.$t("you-should-add-once-only")),1),e("div",kr,[e("button",{class:"btn btn-success btn-md mr-2",onClick:i},S(r.$t("yes")),1),e("button",{class:"btn btn-error btn-md",onClick:d},S(r.$t("no")),1)])]),Ar],512)],64))}}),Cr={class:"list-overlay"},Rr={class:"custom-modal-big h-5/6 xl:h-3/4 flex flex-col items-center"},Nr=e("i",{class:"fas fa-times"},null,-1),Qr=[Nr],Or={class:"text-white text-center font-bold text-lg"},jr={class:"grid grid-cols-2 xl:grid-cols-4 justify-center items-center pb-5 text-center"},Vr={class:"form-control items-center"},Er={class:"label cursor-pointer space-x-2"},Lr={class:"label-text text-error text-xs font-bold"},Pr={class:"form-control items-center"},Ur={class:"label cursor-pointer space-x-2"},qr={class:"label-text text-info text-xs font-bold"},Wr={class:"form-control items-center"},Fr={class:"label cursor-pointer space-x-2"},Tr={class:"label-text text-success text-xs font-bold"},Br={class:"form-control items-center"},zr={class:"label cursor-pointer space-x-2"},Gr={class:"label-text text-warning text-xs font-bold"},Hr={class:"custom-item-list mb-5"},Kr={class:"flex space-x-10"},Zr={class:"flex space-x-3"},Jr={class:"btn btn-sm btn-success",onclick:"shop_container.showModal()"},Xr={id:"shop_container",class:"modal"},Yr={class:"modal-box custom-gradient-gray-blue custom-border"},ti=e("form",{method:"dialog"},[e("button",{class:"btn btn-sm btn-circle btn-ghost text-white absolute right-2 top-2"},"✕")],-1),ei={class:"py-4 text-base text-white text-center"},si={class:"grid grid-cols-2 gap-2 p-2"},oi={method:"dialog",class:"flex justify-center"},ai={class:"btn btn-sm btn-success text-black"},ni=e("form",{method:"dialog",class:"modal-backdrop"},[e("button")],-1),ri={class:"modal-box custom-gradient-gray-blue custom-border"},ii={class:"py-4 text-lg text-white text-center"},li={class:"text-error"},ui={class:"py-4 text-md text-white text-center"},ci={class:"flex justify-center"},di=e("form",{method:"dialog",class:"modal-backdrop"},[e("button")],-1),hi=Y({__name:"PlannerWarehouse",emits:["closeOverlay"],setup(t,{emit:s}){const o=k(),a=s,n=k({"Base Item":!0,"Build Material":!0,"Insight Material":!0,"Resonate Material":!0}),i=()=>{j().data.length===0?Sr():Dr(),$r(j().data)};Ht(()=>{q().setIsEditingWarehouse(!0),i()});const h=(p,y)=>{j().updateItem(p,Number(y))},d=p=>{n.value[p]=!n.value[p]},r=R(()=>Object.values(n.value).some(y=>y)?j().data.filter(y=>n.value[y.Category]):j().data),f=()=>{Object.values(n.value).every(p=>p)?j().resetAll():Object.keys(n.value).forEach(p=>{n.value[p]&&j().resetCategory(p)}),b()},v=()=>{q().setIsEditingWarehouse(!1),a("closeOverlay")},l=()=>{var p;return(p=o.value)==null?void 0:p.showModal()},b=()=>{var p;return(p=o.value)==null?void 0:p.close()};return(p,y)=>{const _=jt("i18n-t");return x(),M("div",Cr,[e("div",Rr,[e("button",{onClick:v,class:"absolute top-2 right-4 text-white"},Qr),e("p",Or,S(p.$t("warehouse-auto-save")),1),e("div",null,[e("div",jr,[e("div",Vr,[e("label",Er,[e("span",Lr,S(p.$t("base-item")),1),e("input",{type:"checkbox",checked:"",onChange:y[0]||(y[0]=D=>d("Base Item")),class:"checkbox checkbox-error"},null,32)])]),e("div",Pr,[e("label",Ur,[e("span",qr,S(p.$t("build-material")),1),e("input",{type:"checkbox",checked:"",onChange:y[1]||(y[1]=D=>d("Build Material")),class:"checkbox checkbox-info"},null,32)])]),e("div",Wr,[e("label",Fr,[e("span",Tr,S(p.$t("insight-material")),1),e("input",{type:"checkbox",checked:"",onChange:y[2]||(y[2]=D=>d("Insight Material")),class:"checkbox checkbox-success"},null,32)])]),e("div",Br,[e("label",zr,[e("span",Gr,S(p.$t("resonate-material")),1),e("input",{type:"checkbox",checked:"",onChange:y[3]||(y[3]=D=>d("Resonate Material")),class:"checkbox checkbox-warning"},null,32)])])])]),e("div",Hr,[(x(!0),M(T,null,tt(r.value,D=>(x(),B(br,{key:D.Material,material:D,"onUpdate:quantity":c=>h(D.Material,c),class:""},null,8,["material","onUpdate:quantity"]))),128))]),e("div",Kr,[e("div",Zr,[e("button",Jr,S(p.$t("event-materials")),1),e("dialog",Xr,[e("div",Yr,[ti,e("p",ei,S(p.$t("you-can-quickly-add-materials-from-jukeboxes-and-events-here")),1),e("div",si,[N(pt,{version:"jb1",text:p.$t("jukebox-normal"),type:p.$t("jukebox")},null,8,["text","type"]),N(pt,{version:"jb2",text:p.$t("jukebox-collector"),type:p.$t("jukebox")},null,8,["text","type"]),N(pt,{version:"1.21",text:p.$t("event-shop-button",{version:"1.2",number:"1"}),type:p.$t("event-shop")},null,8,["text","type"]),N(pt,{version:"1.22",text:p.$t("event-shop-button",{version:"1.2",number:"2"}),type:p.$t("event-shop")},null,8,["text","type"]),N(pt,{version:"1.31",text:p.$t("event-shop-button",{version:"1.3",number:"1"}),type:p.$t("event-shop")},null,8,["text","type"]),N(pt,{version:"1.32",text:p.$t("event-shop-button",{version:"1.3",number:"2"}),type:p.$t("event-shop")},null,8,["text","type"])]),e("form",oi,[e("button",ai,S(p.$t("close")),1)])]),ni])]),e("button",{class:"btn btn-error btn-sm",onClick:l},S(p.$t("reset")),1),e("dialog",{ref_key:"dialog",ref:o,class:"modal"},[e("div",ri,[e("p",ii,[N(_,{keypath:"reset-quantity-of-selected-categories"},{highlight:K(()=>[e("span",li,S(p.$t("selected")),1)]),_:1})]),e("p",ui,S(p.$t("click-the-buttons-at-the-top-to-select")),1),e("div",ci,[e("button",{class:"btn btn-success btn-md mr-2",onClick:f},S(p.$t("yes")),1),e("button",{class:"btn btn-error btn-md",onClick:b},S(p.$t("no")),1)])]),di],512)])])])}}}),pi={class:"list-overlay"},yi={class:"custom-modal-small h-auto space-y-5"},vi=e("i",{class:"fas fa-times"},null,-1),mi=[vi],fi={class:"form-control"},gi=["data-tip"],bi={class:"cursor-pointer label justify-center space-x-5 text-center"},_i={class:"label-text text-white text-md"},Si={class:"form-control"},Di={class:"cursor-pointer label justify-center space-x-5 text-center"},$i={class:"label-text text-white text-md"},xi={class:"flex justify-center"},wi=Y({__name:"PlannerSettings",props:{settings:{type:Object,required:!0}},emits:["closeOverlay","saveSettings"],setup(t,{emit:s}){const o=t,a=s,n=k(o.settings.enabledUnreleasedStages),i=k(o.settings.enableGreedyMethod),h=()=>{a("closeOverlay")},d=()=>{const r={showUnreleasedArcanists:o.settings.showUnreleasedArcanists,enabledUnreleasedStages:n.value,enableGreedyMethod:i.value};a("saveSettings",r),h()};return(r,f)=>(x(),M("div",pi,[e("div",yi,[e("button",{onClick:h,class:"absolute top-2 right-4 text-white"},mi),e("div",fi,[e("div",{class:"tooltip","data-tip":r.$t("prioritize-purple-materials-when-farming")},[e("label",bi,[e("span",_i,S(r.$t("enable-greedy-method")),1),J(e("input",{"onUpdate:modelValue":f[0]||(f[0]=v=>i.value=v),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[dt,i.value]])])],8,gi)]),e("div",Si,[e("label",Di,[e("span",$i,S(r.$t("use-1-4-stage-data-experimental")),1),J(e("input",{"onUpdate:modelValue":f[1]||(f[1]=v=>n.value=v),type:"checkbox",class:"checkbox checkbox-info"},null,512),[[dt,n.value]])])]),e("div",xi,[e("button",{onClick:d,class:"btn btn-success"},S(r.$t("save")),1)])])]))}}),ht=t=>(wt("data-v-b9761711"),t=t(),Mt(),t),Mi={class:"responsive-spacer"},Ii={class:"flex pb-4"},ki={class:"text-2xl text-white font-bold"},Ai={class:"flex justify-between items-center mb-2 mt-2"},Ci=ht(()=>e("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1)),Ri={class:"flex space-x-2"},Ni=["data-tip"],Qi=ht(()=>e("i",{class:"fa-solid fa-bolt"},null,-1)),Oi=[Qi],ji=["data-tip"],Vi=ht(()=>e("i",{class:"fa-solid fa-tree"},null,-1)),Ei=[Vi],Li=["data-tip"],Pi=ht(()=>e("i",{class:"fa-solid fa-box-archive"},null,-1)),Ui=[Pi],qi=["data-tip"],Wi=ht(()=>e("i",{class:"fa-solid fa-gear"},null,-1)),Fi=[Wi],Ti=ht(()=>e("div",{class:"custom-line"},null,-1)),Bi=ht(()=>e("div",{class:"custom-line"},null,-1)),zi={key:0,class:"overlay"},Gi={key:1,class:"overlay"},Hi={key:2,class:"overlay"},Ki={key:3,class:"overlay"},Zi={key:4,class:"overlay"},Ji={key:5,class:"overlay"},Xi=Y({__name:"PlannerView",setup(t){const s=Zt(),o=bt(),a=Jt(),n=F().arcanists,i=yt(),h=k([]),d=R(()=>s.selectedArcanists.map(V=>V.Id));Ot(()=>{h.value=n.filter(V=>!d.value.includes(V.Id)&&(i.settings.showUnreleasedArcanists?!0:V.IsReleased)),h.value.sort((V,At)=>{const Pt=At.Rarity-V.Rarity;return Pt!==0?Pt:V.Name.localeCompare(At.Name)})});const r=k(null),f=k([]),v=k(!1),l=k(!1),b=k(!1),p=k(!1),y=k(!1),_=k(!1),D=k(null),c=k(null),g=k(null),m=k(null),u=k(null),w=k(null),$=()=>{v.value=!0},I=()=>{v.value=!1},O=()=>{l.value=!0},Q=V=>{r.value=V,O()},U=()=>{l.value=!1},P=()=>{b.value=!0},G=()=>{b.value=!1},st=()=>{p.value=!0},ot=()=>{p.value=!1},et=()=>{y.value=!0},A=()=>{y.value=!1,q().setIsEditingWarehouse(!1)},C=()=>{_.value=!0},L=()=>{_.value=!1},at=V=>{r.value={Id:V.Id,isVisible:!0,currentInsight:0,currentLevel:1,currentResonance:0,goalInsight:0,goalLevel:1,goalResonance:0},O()},nt=V=>{s.selectedArcanists=V,U()},rt=V=>{h.value=V},mt=V=>{f.value=V},ut=V=>{o.settings=V},It=V=>{a.settings=V},kt=V=>{i.settings=V};return ct(D,G),ct(c,I),ct(g,U),ct(m,ot),ct(u,A),ct(w,L),(V,At)=>(x(),M("div",Mi,[e("div",Ii,[e("h2",ki,S(V.$t("planner")),1)]),N(eo,{selectedArcanists:E(s).selectedArcanists,onOpenEditOverlay:Q},null,8,["selectedArcanists"]),e("div",Ai,[e("button",{onClick:$,class:"btn btn-ghost btn-sm custom-gradient-button"},[Ci,it(" "+S(V.$t("add-arcanist")),1)]),e("div",Ri,[e("div",{class:"tooltip","data-tip":V.$t("activity-settings")},[e("button",{onClick:P,class:"btn btn-ghost btn-sm custom-gradient-button"},Oi)],8,Ni),e("div",{class:"tooltip","data-tip":V.$t("wilderness-settings")},[e("button",{onClick:st,class:"btn btn-ghost btn-sm custom-gradient-button"},Ei)],8,ji),e("div",{class:"tooltip","data-tip":V.$t("manage-warehouse")},[e("button",{onClick:et,class:"btn btn-ghost btn-sm custom-gradient-button"},Ui)],8,Li),e("div",{class:"tooltip","data-tip":V.$t("settings")},[e("button",{onClick:C,class:"btn btn-ghost btn-sm custom-gradient-button"},Fi)],8,qi)])]),Ti,N(vn,{totalActivityAndDays:f.value,wildernessSettings:E(a).settings},null,8,["totalActivityAndDays","wildernessSettings"]),Bi,v.value?(x(),M("div",zi,[N(Me,{ref_key:"arcanistListRef",ref:c,arcanists:h.value,onCloseOverlay:I,onSelectArcanist:at},null,8,["arcanists"])])):W("",!0),l.value?(x(),M("div",Gi,[r.value?(x(),B(Cs,{key:0,ref_key:"plannerEditRef",ref:g,selectedArcanist:r.value,selectedArcanists:E(s).selectedArcanists,listArcanists:h.value,onCloseOverlay:U,onUpdateSelectedArcanists:nt,onUpdateListArcanists:rt},null,8,["selectedArcanist","selectedArcanists","listArcanists"])):W("",!0)])):W("",!0),b.value?(x(),M("div",Hi,[N(qn,{ref_key:"activityRef",ref:D,settings:E(o).settings,onCloseOverlay:G,onSaveActivitySettings:ut},null,8,["settings"])])):W("",!0),p.value?(x(),M("div",Ki,[N(yr,{ref_key:"wildernessRef",ref:m,settings:E(a).settings,onCloseOverlay:ot,onSaveWildernessSettings:It},null,8,["settings"])])):W("",!0),y.value?(x(),M("div",Zi,[N(hi,{ref_key:"warehouseRef",ref:u,onCloseOverlay:A},null,512)])):W("",!0),_.value?(x(),M("div",Ji,[N(wi,{ref_key:"settingsRef",ref:w,settings:E(i).settings,onCloseOverlay:L,onSaveSettings:kt},null,8,["settings"])])):W("",!0),N(Ba,{"onUpdate:totalActivityAndDays":mt})]))}}),sl=lt(Xi,[["__scopeId","data-v-b9761711"]]);export{sl as default};
